"use strict";(self.webpackChunkdemo_app_angular=self.webpackChunkdemo_app_angular||[]).push([[8511],{8511:(F,m,h)=>{h.r(m),h.d(m,{six_dropdown:()=>_,six_menu:()=>S});var d=h(5861),n=h(5371),E=h(4681),f=h(7418),u=h(3185),M=h(5730);function v(e){return e.tabIndex>-1}function g(e){if(v(e))return e;if(null!=e.shadowRoot){const t=[...e.shadowRoot.children].find(i=>v(i));if(null!=t)return t}return null!=e.children?[...e.children].map(t=>g(t)).at(0):void 0}let D=0;const _=class{constructor(e){(0,n.r)(this,e),this.sixShow=(0,n.c)(this,"six-dropdown-show",7),this.sixAfterShow=(0,n.c)(this,"six-dropdown-after-show",7),this.sixHide=(0,n.c)(this,"six-dropdown-hide",7),this.sixAfterHide=(0,n.c)(this,"six-dropdown-after-hide",7),this.sixAutoFilter=(0,n.c)(this,"six-dropdown-auto-filter-fired",7),this.sixAsyncFilterFired=(0,n.c)(this,"six-async-filter-fired",7),this.sixScroll=(0,n.c)(this,"six-dropdown-scroll",7),this.componentId="dropdown-"+ ++D,this.isVisible=!1,this.resizeObserver=new ResizeObserver((0,u.a)(()=>this.updatePanelPosition(),100)),this.eventListeners=new f.E,this.getMenuItems=()=>{var t,i,s;if(this.options.length>0)return{sixMenuItems:this.renderedOptions.map(I=>(0,n.h)("six-menu-item",{value:I.value},I.label)),selectionContainerItems:[]};if(null==this.panel)return{sixMenuItems:[],selectionContainerItems:[]};const r=null===(t=this.panelSlot)||void 0===t?void 0:t.assignedElements({flatten:!0}).filter(T).at(0),l=null===(i=this.panelSlot)||void 0===i?void 0:i.assignedElements({flatten:!0}).filter(c).at(0),o=r?.querySelectorAll("six-menu-item")||[],a=(null===(s=l?.querySelector("slot"))||void 0===s?void 0:s.assignedElements().filter(x))||[];return o.length>0||a.length>0?{sixMenuItems:a,selectionContainerItems:[...o]}:{sixMenuItems:l?Array.from(l.querySelectorAll("six-menu-item")):[],selectionContainerItems:[]}},this.handleDocumentKeyDown=t=>{var i;const s=t;if("Escape"===s.key)return this.hide(),void this.focusOnTrigger();if(this.filterInputElement===(null===(i=this.host.shadowRoot)||void 0===i?void 0:i.activeElement)&&"ArrowDown"===s.key){const{sixMenuItems:r,selectionContainerItems:l}=this.getMenuItems(),o=[...l,...r].find(a=>"none"!==a.style.display);o?.setFocus()}if("Tab"===s.key){if(this.open&&null!=document.activeElement&&x(document.activeElement))return s.preventDefault(),this.hide(),void this.focusOnTrigger();setTimeout(()=>{var r,l;const o=this.container.getRootNode()instanceof ShadowRoot?null===(l=null===(r=document.activeElement)||void 0===r?void 0:r.shadowRoot)||void 0===l?void 0:l.activeElement:document.activeElement;o?.closest(this.container.tagName.toLowerCase())===this.container||this.hide()})}},this.handleDocumentMouseDown=t=>{t.composedPath().includes(this.container)||this.hide()},this.handlePanelSelect=t=>{this.closeOnSelect&&c(t.target)&&(this.hide(),this.focusOnTrigger())},this.handleTriggerClick=()=>{this.open?this.hide():this.show()},this.handleTriggerKeyDown=t=>{if("Escape"===t.key)return this.focusOnTrigger(),void this.hide();if(!this.disableHideOnEnterAndSpace&&[" ","Enter"].includes(t.key))return t.preventDefault(),void(this.open?this.hide():this.show());const i=this.getMenu();if(["ArrowDown","ArrowUp"].includes(t.key)){if(t.preventDefault(),this.open||this.show(),null==i)return;const r=[...i.querySelectorAll("six-menu-item")],l=r.at(0),o=r.at(r.length-1);if("ArrowDown"===t.key&&null!=l)return void l.setFocus();if("ArrowUp"===t.key&&null!=o)return void o.setFocus()}!this.open||null==i||["Tab","Shift","Meta","Ctrl","Alt"].includes(t.key)||i.typeToSelect(t.key)},this.handleTriggerKeyUp=t=>{" "===t.key&&t.preventDefault()},this.handleTriggerSlotChange=()=>{this.updateAccessibleTrigger()},this.handleDropdownScroll=()=>{null!=this.scrollPanel&&this.sixScroll.emit({scrollHeight:this.scrollPanel.scrollHeight,scrollTop:this.scrollPanel.scrollTop,scrollbarHeight:this.scrollPanel.offsetHeight*(this.scrollPanel.offsetHeight/this.scrollPanel.scrollHeight),scrollRatio:this.scrollPanel.scrollTop/(this.scrollPanel.scrollHeight-this.scrollPanel.clientHeight)})},this.open=!1,this.placement="bottom-start",this.closeOnSelect=!0,this.distance=4,this.skidding=0,this.hoist=!1,this.containingElement=void 0,this.filter=!1,this.asyncFilter=!1,this.filterPlaceholder="Filter...",this.autofocusFilter=!0,this.filterDebounce=0,this.disableHideOnEnterAndSpace=!1,this.options=[],this.virtualScroll=!1,this.matchTriggerWidth=!1,this.renderedOptions=[]}get filterEnabled(){return this.filter||this.asyncFilter}get container(){return this.containingElement||this.host}handleOpenChange(){this.open?this.show():this.hide(),this.updateAccessibleTrigger()}handlePopoverOptionsChange(){null!=this.popover&&this.popover.setOptions({strategy:this.hoist?"fixed":"absolute",placement:this.placement,distance:this.distance,skidding:this.skidding})}handleOptionsChange(){this.validateOptions()}validateOptions(){Array.isArray(this.options)||(this.options=[]),this.virtualScroll&&0===this.options.length&&console.error("Options must be defined when using virtual scrolling"),this.renderedOptions=[...this.options]}componentWillLoad(){this.validateOptions(),this.asyncFilter&&(this.filterDebounce=u.D)}componentDidLoad(){this.init(),this.open&&this.show()}connectedCallback(){this.init()}init(){this.initPopover();const e=this.filterInputElement;null!=e&&this.eventListeners.add(e,"six-input-input",(0,u.a)(()=>{var t;const i=null!==(t=e.value)&&void 0!==t?t:"";this.filter&&this.applyFilter(i),this.emitFilterEvents(i)},this.filterDebounce))}applyFilter(e){var t;const i=(null===(t=e.toLowerCase())||void 0===t?void 0:t.trim())||"";if(this.options.length>0)this.renderedOptions=this.options.filter(s=>{var r,l,o,a;return s.label&&(null===(l=null===(r=String(s.label))||void 0===r?void 0:r.toLowerCase())||void 0===l?void 0:l.includes(i))||s.value&&(null===(a=null===(o=String(s.value))||void 0===o?void 0:o.toLowerCase())||void 0===a?void 0:a.includes(i))});else{const{selectionContainerItems:s,sixMenuItems:r}=this.getMenuItems(),l=s.map(o=>o.value);s.forEach(function(){var o=(0,d.Z)(function*(a){a.style.display=(yield w(a,i))?"unset":"none"});return function(a){return o.apply(this,arguments)}}()),r.forEach(function(){var o=(0,d.Z)(function*(a){a.style.display=(yield w(a,i))&&!l.includes(a.value)?"unset":"none"});return function(a){return o.apply(this,arguments)}}())}}resetFilter(){if(null!=this.filterInputElement&&(this.filterInputElement.value="",this.emitFilterEvents("")),this.options.length>0)this.renderedOptions=[...this.options];else{const{selectionContainerItems:e,sixMenuItems:t}=this.getMenuItems();[...e,...t].forEach(i=>i.style.display="unset")}}emitFilterEvents(e){this.filter?this.sixAutoFilter.emit({filterValue:e}):this.asyncFilter&&this.sixAsyncFilterFired.emit({filterValue:e})}initPopover(){var t,e=this;null==this.trigger||null==this.positioner||(this.popover=new E.P(this.trigger,this.positioner,{strategy:this.hoist?"fixed":"absolute",placement:this.placement,distance:this.distance,skidding:this.skidding,transitionElement:this.panel,onAfterHide:()=>{this.filterEnabled&&this.resetFilter(),this.sixAfterHide.emit()},onAfterShow:(t=(0,d.Z)(function*(){e.sixAfterShow.emit()}),function(){return t.apply(this,arguments)}),onTransitionEnd:()=>{!this.open&&null!=this.scrollPanel&&(this.scrollPanel.scrollTop=0)}}))}disconnectedCallback(){var e;this.resizeObserver.disconnect(),this.eventListeners.removeAll(),this.hide(),null===(e=this.popover)||void 0===e||e.destroy(),this.popover=void 0}show(){var e=this;return(0,d.Z)(function*(){e.isVisible||null==e.popover||null==e.panel||(e.sixShow.emit().defaultPrevented?e.open=!1:(e.eventListeners.add(e.panel,"six-menu-item-selected",e.handlePanelSelect),e.eventListeners.add(document,"keydown",e.handleDocumentKeyDown),e.eventListeners.add(document,"mousedown",e.handleDocumentMouseDown),e.isVisible=!0,e.open=!0,null!=e.trigger&&e.resizeObserver.observe(e.trigger),e.updatePanelPosition(),e.popover.show(),e.filterEnabled&&e.autofocusFilter&&requestAnimationFrame(()=>{var i;null===(i=e.filterInputElement)||void 0===i||i.setFocus()})))})()}updatePanelPosition(){if(this.open){if(this.matchTriggerWidth&&null!=this.trigger&&null!=this.panel){const e=this.trigger.getBoundingClientRect().width;this.panel.style.minWidth=`${e}px`}null!=this.popover&&this.popover.reposition()}}hide(){var e=this;return(0,d.Z)(function*(){e.resizeObserver.disconnect(),e.isVisible&&null!=e.panel&&null!=e.popover&&(e.sixHide.emit().defaultPrevented?e.open=!0:(e.eventListeners.remove(e.panel,"six-menu-item-selected",e.handlePanelSelect),e.eventListeners.remove(document,"keydown",e.handleDocumentKeyDown),e.eventListeners.remove(document,"mousedown",e.handleDocumentMouseDown),e.isVisible=!1,e.open=!1,e.popover.hide()))})()}focusOnTrigger(){var e;if(null==this.trigger)return;const t=null===(e=this.triggerSlot)||void 0===e?void 0:e.assignedElements({flatten:!0}).at(0);null!=t&&("function"==typeof t.setFocus?t.setFocus():"function"==typeof t.focus&&t.focus())}getMenu(){var e;return null===(e=this.panelSlot)||void 0===e?void 0:e.assignedElements({flatten:!0}).filter(c).at(0)}reposition(){var e=this;return(0,d.Z)(function*(){e.open&&null!=e.popover&&e.popover.reposition()})()}updateAccessibleTrigger(){var e;if(null==this.trigger)return;const i=((null===(e=this.triggerSlot)||void 0===e?void 0:e.assignedElements({flatten:!0}))||[]).map(g).at(0);null!=i&&(i.setAttribute("aria-haspopup","true"),i.setAttribute("aria-expanded",this.open?"true":"false"))}render(){return(0,n.h)("div",{part:"base",id:this.componentId,class:{dropdown:!0,"dropdown--open":this.open}},(0,n.h)("span",{part:"trigger",class:"dropdown__trigger",ref:e=>this.trigger=e,onClick:this.handleTriggerClick,onKeyDown:this.handleTriggerKeyDown,onKeyUp:this.handleTriggerKeyUp},(0,n.h)("slot",{name:"trigger",ref:e=>this.triggerSlot=e,onSlotchange:this.handleTriggerSlotChange})),(0,n.h)("div",{ref:e=>this.positioner=e,class:{dropdown__positioner:!0,dropdown__positioner__filtered:(this.filter||this.asyncFilter)&&!this.hoist}},(0,n.h)("div",{ref:e=>this.panel=e,part:"panel",class:"dropdown__panel",role:"menu","aria-hidden":this.open?"false":"true","aria-labelledby":this.componentId},this.filterEnabled&&(0,n.h)("six-input",{class:{filter:!0,"filter-hidden":!this.open},"dropdown-search":!0,"aria-hidden":this.open?"false":"true",ref:e=>this.filterInputElement=e,placeholder:this.filterPlaceholder},(0,n.h)("six-icon",{class:"filter__icon",slot:"suffix",size:"small"},"search")),(0,n.h)("div",{class:{dropdown__panel__scroll:!0,"dropdown__panel__scroll--virtual":this.virtualScroll},onScroll:this.handleDropdownScroll,ref:e=>this.scrollPanel=e},(0,n.h)("slot",{ref:e=>this.panelSlot=e}),this.options.length>0&&(0,n.h)("six-menu",{part:"menu",items:this.renderedOptions,virtualScroll:this.virtualScroll})),(0,n.h)("slot",{name:"dropdown-footer"}))))}get host(){return(0,n.g)(this)}static get watchers(){return{open:["handleOpenChange"],distance:["handlePopoverOptionsChange"],hoist:["handlePopoverOptionsChange"],placement:["handlePopoverOptionsChange"],skidding:["handlePopoverOptionsChange"],options:["handleOptionsChange"],virtualScroll:["handleOptionsChange"]}}};function c(e){return"six-menu"===e?.tagName.toLowerCase()}function x(e){return"six-menu-item"===e?.tagName.toLowerCase()}function T(e){var t;return(null===(t=e?.getAttribute("class"))||void 0===t?void 0:t.includes("selection-container"))||!1}function w(e,t){return p.apply(this,arguments)}function p(){return(p=(0,d.Z)(function*(e,t){return e.value.toLowerCase().includes(t)||(yield e.getTextLabel()).toLowerCase().includes(t)})).apply(this,arguments)}_.style=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:border-box}:host{display:inline-block}.dropdown{position:relative}.dropdown__trigger{display:block}.dropdown__positioner{position:absolute;z-index:var(--six-z-index-dropdown)}.dropdown__positioner__filtered{width:100%}.dropdown__panel{font-family:var(--six-font-sans);font-size:var(--six-font-size-small);font-weight:var(--six-font-weight-normal);color:var(--color);background-color:var(--six-panel-background-color);border-radius:var(--six-border-radius-medium);border:1px solid var(--six-color-web-rock-300);box-shadow:var(--six-shadow-small);opacity:0;pointer-events:none;transform:scale(0.9);transition:var(--six-transition-fast) opacity, var(--six-transition-fast) transform;max-width:90vw}.dropdown__panel__scroll{max-height:18.75rem;overflow-y:auto;overflow-x:hidden;overscroll-behavior:none}.dropdown__panel__scroll--virtual{overflow-y:hidden;overflow-x:hidden}.filter-hidden{display:none}.dropdown__positioner[data-popper-placement^=top] .dropdown__panel{transform-origin:bottom}.dropdown__positioner[data-popper-placement^=bottom] .dropdown__panel{transform-origin:top}.dropdown__positioner[data-popper-placement^=left] .dropdown__panel{transform-origin:right}.dropdown__positioner[data-popper-placement^=right] .dropdown__panel{transform-origin:left}.dropdown__positioner.popover-visible .dropdown__panel{opacity:1;transform:none;pointer-events:all}.filter{border-bottom:1px solid var(--six-color-web-rock-300)}.filter__icon{color:var(--six-color-web-rock-600)}";const y=e=>{var t,i,s;return null===(s=null===(i=null===(t=e?.shadowRoot)||void 0===t?void 0:t.querySelector(".menu-item"))||void 0===i?void 0:i.classList)||void 0===s?void 0:s.contains("menu-item--focused")},b=({value:e,label:t})=>(0,n.h)("six-menu-item",{key:e,value:e},t),S=class{constructor(e){(0,n.r)(this,e),this.sixMenuItemSelected=(0,n.c)(this,"six-menu-item-selected",7),this.eventListeners=new f.E,this.typeToSelectString="",this.handleScrolling=()=>{null!=this.menuWrapper&&(this.scrollingIndex=Math.floor(this.menuWrapper.scrollTop/this.sixMenuItemHeight))},this.removeBoxShadow=!1,this.items=null,this.itemsShown=void 0,this.virtualScroll=!1,this.itemSize=10,this.scrollingDebounce=15,this.disableKeyboardHandling=!1,this.scrollingIndex=0,this.sixMenuItemHeight=64}connectedCallback(){this.handleClick=this.handleClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}componentWillLoad(){}componentDidLoad(){this.setupForVirtualScrollingAfterRendering()}disconnectedCallback(){this.eventListeners.removeAll()}typeToSelect(e){var t=this;return(0,d.Z)(function*(){var i;clearTimeout(t.typeToSelectTimeout),t.typeToSelectTimeout=setTimeout(()=>t.typeToSelectString="",750),t.typeToSelectString+=e.toLowerCase();const s=t.getItems();for(const r of s){const l=null===(i=r.shadowRoot)||void 0===i?void 0:i.querySelector("slot:not([name])");if((0,M.a)(l).toLowerCase().trim().substring(0,t.typeToSelectString.length)===t.typeToSelectString){r.setFocus();break}}})()}getItemsShown(){var e;return null!==(e=this.itemsShown)&&void 0!==e?e:this.virtualScroll?5:0}setupForVirtualScrollingAfterRendering(){var e,t;if(!this.virtualScroll||null==this.menuWrapper)return;this.eventListeners.add(this.menuWrapper,"scroll",(0,u.a)(this.handleScrolling,this.scrollingDebounce));const i=null===(t=null===(e=this.menu)||void 0===e?void 0:e.querySelector("six-menu-item"))||void 0===t?void 0:t.clientHeight;null!=i&&i>0&&(this.sixMenuItemHeight=i)}getItems(){if(null==this.menu)return[];if(null!=this.items)return this.items.map(b);const e=this.menu.querySelector("slot");return null==e?[]:[...e.assignedElements({flatten:!0})].filter(t=>(e=>"six-menu-item"===e?.tagName.toLowerCase())(t)&&!t.disabled)}getActiveItemIndex(){const e=this.getItems(),t=this.getActiveItem();if(null!=t){const s=e.indexOf(t);if(s>-1)return s}return this.extractItemsFromDOM().findIndex(y)}getActiveItem(){var e;return this.getItems().find(i=>i===document.activeElement)??(null===(e=this.extractItemsFromDOM())||void 0===e?void 0:e.find(y))}extractItemsFromDOM(){var e,t;return Array.from(null!==(t=null===(e=this.host.shadowRoot)||void 0===e?void 0:e.querySelectorAll("six-menu-item"))&&void 0!==t?t:[])}setActiveItem(e){e?.setFocus()}handleClick(e){const i=e.target.closest("six-menu-item");i&&!i.disabled&&this.sixMenuItemSelected.emit({name:i.value,item:i})}handleKeyDown(e){if(!this.disableKeyboardHandling){if("Enter"===e.key){const t=this.getActiveItem();e.preventDefault(),null!=t&&this.sixMenuItemSelected.emit({name:t.value,item:t})}if(" "===e.key&&e.preventDefault(),["ArrowDown","ArrowUp","Home","End"].includes(e.key)){const t=null===this.items?this.getItems():this.extractItemsFromDOM();let i=this.getActiveItemIndex();if(t.length>0)return e.preventDefault(),"ArrowDown"===e.key?i++:"ArrowUp"===e.key?i--:"Home"===e.key?i=0:"End"===e.key&&(i=t.length-1),i<0&&(i=0),i>t.length-1&&(i=t.length-1),void this.setActiveItem(t[i])}this.typeToSelect(e.key)}}getMenuWrapperStyle(){var e;const t={};return this.getItemsShown()>0&&(t.height=(null!==(e=this.getItemsShown())&&void 0!==e?e:0)*this.sixMenuItemHeight+"px"),Object.assign({},t)}getMenuContainerStyle(){const e={};return this.virtualScroll&&(e.transform=`translateY(${this.sixMenuItemHeight*this.scrollingIndex}px)`),Object.assign({},e)}getScrollbarGhostStyle(){const e={};return this.virtualScroll&&null!==this.items&&(e.height=this.items.length*this.sixMenuItemHeight-this.itemSize*this.sixMenuItemHeight+"px"),Object.assign({},e)}renderItems(){if(null!=this.items)return this.virtualScroll?this.items.slice(this.scrollingIndex,Math.min(this.items.length,this.itemSize+this.scrollingIndex)).map(({value:e,label:t})=>(0,n.h)("six-menu-item",{checkType:"check",key:e,value:e},t)):this.items.map(b)}render(){return(0,n.h)("div",{ref:e=>this.menuWrapper=e,style:this.getMenuWrapperStyle(),part:"wrapper",class:{menu:!0,".no-shadow":this.removeBoxShadow}},(0,n.h)("div",{ref:e=>this.menu=e,part:"base",role:"menu",onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:0,style:this.getMenuContainerStyle()},(0,n.h)("slot",null),this.renderItems()),this.virtualScroll&&(0,n.h)("div",{style:this.getScrollbarGhostStyle()}))}get host(){return(0,n.g)(this)}};S.style=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:border-box}:host{display:block}.menu{padding:var(--six-spacing-xx-small) 0;border:none;box-shadow:var(--six-shadow-small);overflow-y:auto;overflow-x:hidden}.menu:focus{outline:none}.no-shadow{box-shadow:none}"}}]);