"use strict";(self.webpackChunkdemo_app_angular=self.webpackChunkdemo_app_angular||[]).push([[4445],{4445:(F,f,h)=>{h.r(f),h.d(f,{six_dropdown:()=>x,six_menu:()=>y});var a=h(4795),s=h(8708),S=h(9966),m=h(9643),d=h(3688),u=h(1497);function g(e){return e.tabIndex>-1}function v(e){if(g(e))return e;if(null!=e.shadowRoot){const t=[...e.shadowRoot.children].find(i=>g(i));if(null!=t)return t}return null!=e.children?[...e.children].map(t=>v(t)).at(0):void 0}const _=e=>t=>t?.tagName.toLowerCase()===e.toLowerCase(),w=_("six-menu"),E=_("six-menu-item");let A=0;const x=class{constructor(e){(0,s.r)(this,e),this.sixShow=(0,s.c)(this,"six-dropdown-show",7),this.sixAfterShow=(0,s.c)(this,"six-dropdown-after-show",7),this.sixHide=(0,s.c)(this,"six-dropdown-hide",7),this.sixAfterHide=(0,s.c)(this,"six-dropdown-after-hide",7),this.sixAutoFilter=(0,s.c)(this,"six-dropdown-auto-filter-fired",7),this.sixAsyncFilterFired=(0,s.c)(this,"six-async-filter-fired",7),this.sixScroll=(0,s.c)(this,"six-dropdown-scroll",7),this.componentId="dropdown-"+ ++A,this.isVisible=!1,this.hasBeenInitialized=!1,this.eventListeners=new m.E,this.getMenuItems=()=>{if(this.filteredOptions.length>0)return this.filteredOptions.map(i=>(0,s.h)("six-menu-item",{value:i.value},i.label));if(null==this.panel)return[];const[t]=(0,d.b)(this.panel);return(0,d.b)(t)||Array.from(t.querySelectorAll("six-menu-item"))},this.handleFilterInputChange=()=>{var t,i;if(null==this.filterInputElement)return;const n=(null===(i=null===(t=this.filterInputElement.value)||void 0===t?void 0:t.toLowerCase())||void 0===i?void 0:i.trim())||"";this.filteredOptions.length>0?this.handleFilteringForAttributeItems(n):this.handleFilteringForSlotItems(n),this.sixAutoFilter.emit({filterValue:n})},this.handleDocumentKeyDown=t=>{var i;const n=t;if("Escape"===n.key)return this.hide(),void this.focusOnTrigger();if(this.filterInputElement===(null===(i=this.host.shadowRoot)||void 0===i?void 0:i.activeElement)&&"ArrowDown"===n.key&&this.getMenuItems().find(o=>"none"!==o.style.display)?.setFocus(),"Tab"===n.key){if(this.open&&null!=document.activeElement&&E(document.activeElement))return n.preventDefault(),this.hide(),void this.focusOnTrigger();setTimeout(()=>{var r,o;(this.container.getRootNode()instanceof ShadowRoot?null===(o=null===(r=document.activeElement)||void 0===r?void 0:r.shadowRoot)||void 0===o?void 0:o.activeElement:document.activeElement)?.closest(this.container.tagName.toLowerCase())===this.container||this.hide()})}},this.handleDocumentMouseDown=t=>{t.composedPath().includes(this.container)||this.hide()},this.handlePanelSelect=t=>{this.closeOnSelect&&w(t.target)&&(this.hide(),this.focusOnTrigger())},this.handleTriggerClick=()=>{this.open?this.hide():this.show()},this.handleTriggerKeyDown=t=>{if("Escape"===t.key)return this.focusOnTrigger(),void this.hide();if(!this.disableHideOnEnterAndSpace&&[" ","Enter"].includes(t.key))return t.preventDefault(),void(this.open?this.hide():this.show());const i=this.getMenu();if(["ArrowDown","ArrowUp"].includes(t.key)){if(t.preventDefault(),this.open||this.show(),null==i)return;const r=[...i.querySelectorAll("six-menu-item")],o=r.at(0),l=r.at(r.length-1);if("ArrowDown"===t.key&&null!=o)return void o.setFocus();if("ArrowUp"===t.key&&null!=l)return void l.setFocus()}!this.open||null==i||["Tab","Shift","Meta","Ctrl","Alt"].includes(t.key)||i.typeToSelect(t.key)},this.handleTriggerKeyUp=t=>{" "===t.key&&t.preventDefault()},this.handleTriggerSlotChange=()=>{this.updateAccessibleTrigger()},this.handleDropdownScroll=()=>{null!=this.panel&&this.sixScroll.emit({scrollHeight:this.panel.scrollHeight,scrollTop:this.panel.scrollTop,scrollbarHeight:this.panel.offsetHeight*(this.panel.offsetHeight/this.panel.scrollHeight),scrollRatio:this.panel.scrollTop/(this.panel.scrollHeight-this.panel.clientHeight)})},this.open=!1,this.placement="bottom-start",this.closeOnSelect=!0,this.distance=0,this.skidding=0,this.hoist=!1,this.containingElement=void 0,this.filter=!1,this.asyncFilter=!1,this.filterPlaceholder="Filter...",this.autofocusFilter=!0,this.filterDebounce=u.D,this.disableHideOnEnterAndSpace=!1,this.options=[],this.virtualScroll=!1,this.filteredOptions=[]}get hasFilterEnabled(){return this.filter||this.asyncFilter}get container(){return this.containingElement||this.host}handleOpenChange(){this.open?this.show():this.hide(),this.updateAccessibleTrigger()}handlePopoverOptionsChange(){null!=this.popover&&this.popover.setOptions({strategy:this.hoist?"fixed":"absolute",placement:this.placement,distance:this.distance,skidding:this.skidding})}handleOptionsChange(){Array.isArray(this.options)&&(this.filteredOptions=[...this.options])}connectedCallback(){this.virtualScroll&&null===this.options&&console.error("Options must be defined when using virtual scrolling"),Array.isArray(this.options)&&(this.filteredOptions=[...this.options]),this.hasBeenInitialized&&null==this.popover&&this.initializePopover()}componentDidLoad(){this.hasBeenInitialized=!0,this.initializePopover(),this.open&&this.show(),this.filter?this.setupFiltering(this.handleFilterInputChange):this.asyncFilter&&this.setupFiltering(()=>{var e,t;return this.sixAsyncFilterFired.emit({filterValue:null!==(t=null===(e=this.filterInputElement)||void 0===e?void 0:e.value)&&void 0!==t?t:""})})}initializePopover(){var e=this;if(null==this.trigger||null==this.positioner)return;const i=function(){var r=(0,a.Z)(function*(){var o;e.hasFilterEnabled&&e.autofocusFilter&&(yield null===(o=e.filterInputElement)||void 0===o?void 0:o.setFocus()),e.sixAfterShow.emit()});return function(){return r.apply(this,arguments)}}();this.popover=new S.P(this.trigger,this.positioner,{strategy:this.hoist?"fixed":"absolute",placement:this.placement,distance:this.distance,skidding:this.skidding,transitionElement:this.panel,onAfterHide:()=>{this.filter&&null!=this.filterInputElement&&(this.filterInputElement.value="",this.filteredOptions.length>0?this.filteredOptions=[...this.options]:this.getMenuItems().forEach(o=>o.style.display="unset")),this.sixAfterHide.emit()},onAfterShow:i,onTransitionEnd:()=>{!this.open&&null!=this.panel&&(this.panel.scrollTop=0)}})}setupFiltering(e){null!=this.filterInputElement&&this.eventListeners.add(this.filterInputElement,"six-input-input",(0,u.a)(e,this.filterDebounce))}handleFilteringForAttributeItems(e){this.filteredOptions=""===e&&Array.isArray(this.options)?[...this.options]:this.options.filter(t=>{var i,n,r,o;return t.label&&(null===(n=null===(i=String(t.label))||void 0===i?void 0:i.toLowerCase())||void 0===n?void 0:n.includes(e))||t.value&&(null===(o=null===(r=String(t.value))||void 0===r?void 0:r.toLowerCase())||void 0===o?void 0:o.includes(e))})}handleFilteringForSlotItems(e){this.getMenuItems().forEach(function(){var i=(0,a.Z)(function*(n){var r,o,l,p;const C=(null===(o=null===(r=n?.value)||void 0===r?void 0:r.toLowerCase())||void 0===o?void 0:o.includes(e))||(null===(p=null===(l=yield n?.getTextLabel())||void 0===l?void 0:l.toLowerCase())||void 0===p?void 0:p.includes(e));n.style.display=C?"unset":"none"});return function(n){return i.apply(this,arguments)}}())}disconnectedCallback(){var e;this.eventListeners.removeAll(),this.hide(),null===(e=this.popover)||void 0===e||e.destroy(),this.popover=void 0}show(){var e=this;return(0,a.Z)(function*(){e.isVisible||null==e.popover||null==e.panel||(e.sixShow.emit().defaultPrevented?e.open=!1:(e.eventListeners.add(e.panel,"six-menu-item-selected",e.handlePanelSelect),e.eventListeners.add(document,"keydown",e.handleDocumentKeyDown),e.eventListeners.add(document,"mousedown",e.handleDocumentMouseDown),e.isVisible=!0,e.open=!0,e.popover.show()))})()}hide(){var e=this;return(0,a.Z)(function*(){e.isVisible&&null!=e.panel&&null!=e.popover&&(e.sixHide.emit().defaultPrevented?e.open=!0:(e.eventListeners.remove(e.panel,"six-menu-item-selected",e.handlePanelSelect),e.eventListeners.remove(document,"keydown",e.handleDocumentKeyDown),e.eventListeners.remove(document,"mousedown",e.handleDocumentMouseDown),e.isVisible=!1,e.open=!1,e.popover.hide()))})()}focusOnTrigger(){if(null==this.trigger)return;const[e]=(0,d.b)(this.trigger);null!=e&&("function"==typeof e.setFocus?e.setFocus():"function"==typeof e.focus&&e.focus())}getMenu(){if(null!=this.panel)return(0,d.b)(this.panel).filter(w).at(0)}reposition(){var e=this;return(0,a.Z)(function*(){!e.open||null==e.popover||e.popover.reposition()})()}updateAccessibleTrigger(){if(null==this.trigger)return;const e=(0,d.b)(this.trigger).map(v).at(0);null!=e&&(e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded",this.open?"true":"false"))}render(){return(0,s.h)("div",{part:"base",id:this.componentId,class:{dropdown:!0,"dropdown--open":this.open}},(0,s.h)("span",{part:"trigger",class:"dropdown__trigger",ref:e=>this.trigger=e,onClick:this.handleTriggerClick,onKeyDown:this.handleTriggerKeyDown,onKeyUp:this.handleTriggerKeyUp},(0,s.h)("slot",{name:"trigger",onSlotchange:this.handleTriggerSlotChange})),(0,s.h)("div",{ref:e=>this.positioner=e,class:{dropdown__positioner:!0,dropdown__positioner__filtered:(this.filter||this.asyncFilter)&&!this.hoist}},this.hasFilterEnabled&&(0,s.h)("six-input",{class:{"filter-hidden":!this.open},"aria-hidden":this.open?"false":"true",ref:e=>this.filterInputElement=e,placeholder:this.filterPlaceholder}),(0,s.h)("div",{ref:e=>this.panel=e,part:"panel",class:"dropdown__panel",role:"menu","aria-hidden":this.open?"false":"true","aria-labelledby":this.componentId,onScroll:this.handleDropdownScroll},(0,s.h)("slot",null),this.filteredOptions.length>0&&(0,s.h)("six-menu",{part:"menu",items:this.filteredOptions,virtualScroll:this.virtualScroll}))))}get host(){return(0,s.g)(this)}static get watchers(){return{open:["handleOpenChange"],distance:["handlePopoverOptionsChange"],hoist:["handlePopoverOptionsChange"],placement:["handlePopoverOptionsChange"],skidding:["handlePopoverOptionsChange"],options:["handleOptionsChange"]}}};x.style=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:inherit}:host{display:inline-block}.dropdown{position:relative}.dropdown__trigger{display:block}.dropdown__positioner{position:absolute;z-index:var(--six-z-index-dropdown)}.dropdown__positioner__filtered{width:100%}.dropdown__panel{max-height:50vh;font-family:var(--six-font-sans);font-size:var(--six-font-size-small);font-weight:var(--six-font-weight-normal);color:var(--color);background-color:var(--six-panel-background-color);border-radius:var(--six-border-radius-medium);box-shadow:var(--six-elevation-2dp);opacity:0;overflow:auto;overscroll-behavior:none;pointer-events:none;transform:scale(0.9);transition:var(--six-transition-fast) opacity, var(--six-transition-fast) transform;scrollbar-width:thin}.filter-hidden{display:none}.dropdown__positioner[data-popper-placement^=top] .dropdown__panel{transform-origin:bottom}.dropdown__positioner[data-popper-placement^=bottom] .dropdown__panel{transform-origin:top}.dropdown__positioner[data-popper-placement^=left] .dropdown__panel{transform-origin:right}.dropdown__positioner[data-popper-placement^=right] .dropdown__panel{transform-origin:left}.dropdown__positioner.popover-visible .dropdown__panel{opacity:1;transform:none;pointer-events:all}";const b=e=>{var t,i,n;return null===(n=null===(i=null===(t=e?.shadowRoot)||void 0===t?void 0:t.querySelector(".menu-item"))||void 0===i?void 0:i.classList)||void 0===n?void 0:n.contains("menu-item--focused")},c=({value:e,label:t})=>(0,s.h)("six-menu-item",{value:e},t),y=class{constructor(e){(0,s.r)(this,e),this.sixMenuItemSelected=(0,s.c)(this,"six-menu-item-selected",7),this.eventListeners=new m.E,this.typeToSelectString="",this.handleScrolling=()=>{null!=this.menuWrapper&&(this.scrollingIndex=Math.floor(this.menuWrapper.scrollTop/this.sixMenuItemHeight))},this.removeBoxShadow=!1,this.items=null,this.itemsShown=void 0,this.virtualScroll=!1,this.itemSize=10,this.scrollingDebounce=15,this.scrollingIndex=0,this.sixMenuItemHeight=64}connectedCallback(){this.handleClick=this.handleClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}componentWillLoad(){}componentDidLoad(){this.setupForVirtualScrollingAfterRendering()}disconnectedCallback(){this.eventListeners.removeAll()}typeToSelect(e){var t=this;return(0,a.Z)(function*(){var i;clearTimeout(t.typeToSelectTimeout),t.typeToSelectTimeout=setTimeout(()=>t.typeToSelectString="",750),t.typeToSelectString+=e.toLowerCase();const n=t.getItems();for(const r of n){const o=null===(i=r.shadowRoot)||void 0===i?void 0:i.querySelector("slot:not([name])");if((0,d.a)(o).toLowerCase().trim().substring(0,t.typeToSelectString.length)===t.typeToSelectString){r.setFocus();break}}})()}getItemsShown(){var e;return null!==(e=this.itemsShown)&&void 0!==e?e:this.virtualScroll?5:0}setupForVirtualScrollingAfterRendering(){var e,t;if(!this.virtualScroll||null==this.menuWrapper)return;this.eventListeners.add(this.menuWrapper,"scroll",(0,u.a)(this.handleScrolling,this.scrollingDebounce));const i=null===(t=null===(e=this.menu)||void 0===e?void 0:e.querySelector("six-menu-item"))||void 0===t?void 0:t.clientHeight;null!=i&&i>0&&(this.sixMenuItemHeight=i)}getItems(){if(null==this.menu)return[];if(null!=this.items)return this.items.map(c);const e=this.menu.querySelector("slot");return null==e?[]:[...e.assignedElements({flatten:!0})].filter(t=>(e=>"six-menu-item"===e?.tagName.toLowerCase())(t)&&!t.disabled)}getActiveItemIndex(){const e=this.getItems(),t=this.getActiveItem();if(null!=t){const n=e.indexOf(t);if(n>-1)return n}return this.extractItemsFromDOM().findIndex(b)}getActiveItem(){var e;return this.getItems().find(i=>i===document.activeElement)??(null===(e=this.extractItemsFromDOM())||void 0===e?void 0:e.find(b))}extractItemsFromDOM(){var e,t;return Array.from(null!==(t=null===(e=this.host.shadowRoot)||void 0===e?void 0:e.querySelectorAll("six-menu-item"))&&void 0!==t?t:[])}setActiveItem(e){e?.setFocus()}handleClick(e){const i=e.target.closest("six-menu-item");i&&!i.disabled&&this.sixMenuItemSelected.emit({name:i.value,item:i})}handleKeyDown(e){if("Enter"===e.key){const t=this.getActiveItem();e.preventDefault(),null!=t&&this.sixMenuItemSelected.emit({name:t.value,item:t})}if(" "===e.key&&e.preventDefault(),["ArrowDown","ArrowUp","Home","End"].includes(e.key)){const t=null===this.items?this.getItems():this.extractItemsFromDOM();let i=this.getActiveItemIndex();if(t.length>0)return e.preventDefault(),"ArrowDown"===e.key?i++:"ArrowUp"===e.key?i--:"Home"===e.key?i=0:"End"===e.key&&(i=t.length-1),i<0&&(i=0),i>t.length-1&&(i=t.length-1),void this.setActiveItem(t[i])}this.typeToSelect(e.key)}getMenuWrapperStyle(){var e;const t={};return this.getItemsShown()>0&&(t.height=(null!==(e=this.getItemsShown())&&void 0!==e?e:0)*this.sixMenuItemHeight+"px"),Object.assign({},t)}getMenuContainerStyle(){const e={};return this.virtualScroll&&(e.transform=`translateY(${this.sixMenuItemHeight*this.scrollingIndex}px)`),Object.assign({},e)}getScrollbarGhostStyle(){const e={};return this.virtualScroll&&null!==this.items&&(e.height=this.items.length*this.sixMenuItemHeight-this.itemSize*this.sixMenuItemHeight+"px"),Object.assign({},e)}renderItems(){if(null!=this.items)return this.virtualScroll?this.items.slice(this.scrollingIndex,Math.min(this.items.length,this.itemSize+this.scrollingIndex)).map(c):this.items.map(c)}render(){return(0,s.h)("div",{ref:e=>this.menuWrapper=e,style:this.getMenuWrapperStyle(),part:"wrapper",class:{menu:!0,"menu--noshadow":this.removeBoxShadow,"menu__wrapper--scrollable":this.getItemsShown()>0}},(0,s.h)("div",{ref:e=>this.menu=e,part:"base",role:"menu",onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:0,style:this.getMenuContainerStyle()},(0,s.h)("slot",null),this.renderItems()),this.virtualScroll&&(0,s.h)("div",{style:this.getScrollbarGhostStyle()}))}get host(){return(0,s.g)(this)}};y.style=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:inherit}:host{display:block}.menu{padding:0 0;border:none;box-shadow:var(--six-elevation-2dp)}.menu:focus{outline:none}.menu--noshadow{box-shadow:none}.menu__wrapper--scrollable{overflow-y:auto}"}}]);