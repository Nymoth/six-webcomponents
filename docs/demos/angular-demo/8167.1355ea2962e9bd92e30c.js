(self.webpackChunksix_app=self.webpackChunksix_app||[]).push([[8167],{8167:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ReactiveFormModule:()=>S});var s=r(3223),a=r(453),i=r(1116),o=r(8512),n=r(1225),l=r(6599),u=r(7727),d=r(5366),m=r(878),c=r(509),h=r(4689);let f=(()=>{class e{constructor(){this.users=[{id:0,username:"user"},{id:1,username:"John"}],this.getByUsername=e=>(0,m.of)(this.users.find(t=>t.username===e)).pipe((0,c.g)(600)),this.createOne=e=>(0,m.of)(e).pipe((0,c.g)(1e3),(0,h.w)(()=>{const t={};if("error"===e.username&&(t.username="The username is invalid."),"password"===e.password&&(t.password="The password is invalid."),Object.keys(t).length)return(0,n._)(t);const r=Object.assign({id:this.users.length},e);return this.users.push(r),(0,m.of)(r)})),this.getAll=()=>(0,m.of)(this.users).pipe((0,c.g)(600))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})(),p=(()=>{class e{constructor(e){this.mockService=e,this.loading$=new o.X(!1),this.lastError$=new o.X(void 0),this.resetError=()=>this.lastError$.next(void 0),this.executeAsyncAction=e=>(this.loading$.next(!0),e().pipe((0,l.b)(()=>{this.lastError$.next(void 0),this.loading$.next(!1)}),(0,u.K)(e=>(this.lastError$.next(e),this.loading$.next(!1),(0,n._)(e))))),this.getByUsername=e=>this.mockService.getByUsername(e),this.createOne=e=>this.executeAsyncAction(()=>this.mockService.createOne(e)),this.getAll=()=>this.executeAsyncAction(()=>this.mockService.getAll())}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(f))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})();var g=r(9996),Z=r(3530),b=r(9037);function v(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function w(e){v(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function T(e,t){v(2,arguments);var r=w(e),s=w(t),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}let A=(()=>{class e{transform(e){return e+" (TRANSLATED)"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d.Yjl({name:"translate",type:e,pure:!1}),e})();var _=r(4266),y=r(893);function q(e,t){1&e&&(d.TgZ(0,"p",15),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&e&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"Could not submit the form.")," "))}const x=function(e,t){return{form__status:!0,"form__status--valid":e,"form__status--invalid":t}},U={username:"username",password:"",notes:"some initial value",startDate:null,endDate:null};let D=(()=>{class e{constructor(e,t,r){this.formTestFacade=e,this.fb=t,this.translatePipe=r,this.loading$=this.formTestFacade.loading$,this.lastError$=this.formTestFacade.lastError$,this.CustomValidators={required:(0,b.v)(s.kI.required,this.translatePipe.transform("This field is required.")),minLength:e=>(0,b.v)(s.kI.minLength(e),this.translatePipe.transform(`This field should be at least ${e} characters long.`)),existAsync:e=>e.valueChanges.pipe((0,h.w)(e=>this.formTestFacade.getByUsername(e).pipe((0,g.U)(e=>e?{[this.translatePipe.transform(`Username '${null==e?void 0:e.username}' already exist.`)]:!0}:null))),(0,Z.P)()),minStartDate:(0,b.v)(e=>{return e.value?(t=e.value,1===T(new Date,t)?{pastDate:!0}:null):null;var t},this.translatePipe.transform("Date should be later than today!")),minDate:e=>{var t,r;(null===(t=null==e?void 0:e.controls)||void 0===t?void 0:t.startDate)&&(null===(r=null==e?void 0:e.controls)||void 0===r?void 0:r.endDate)&&1===T(e.controls.startDate.value,e.controls.endDate.value)&&e.controls.endDate.setErrors({"End date should not be before start date":!0})}},this.form=this.fb.group({username:[U.username,[this.CustomValidators.required,this.CustomValidators.minLength(2)],[this.CustomValidators.existAsync]],password:[U.password,[this.CustomValidators.required,this.CustomValidators.minLength(8)]],notes:[U.notes],startDate:[U.startDate,[s.kI.required,this.CustomValidators.minStartDate]],endDate:[U.endDate,[s.kI.required]]},{validators:[this.CustomValidators.minDate]}),this.submitForm=()=>{this.submitDisabled||this.formTestFacade.createOne(this.form.value).pipe((0,l.b)(()=>{this.resetForm()}),(0,u.K)(e=>{var t,r;if(b.Is.Object(r=e)&&Object.keys(r).every(e=>Object.keys(U).includes(e)))for(const[s,a]of Object.entries(e)){const e=this.translatePipe.transform(a);null===(t=this.form.get(s))||void 0===t||t.setErrors({[e]:!0})}return(0,n._)(e)})).subscribe()},this.resetForm=()=>{this.form.setValue(U),this.form.reset(U),this.formTestFacade.resetError()},setTimeout(()=>this.form.patchValue(U))}get submitDisabled(){return this.form.invalid||this.form.pending}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(p),d.Y36(s.qu),d.Y36(A))},e.\u0275cmp=d.Xpm({type:e,selectors:[["ng-component"]],decls:65,vars:14,consts:[[1,"flexbox-parent"],[1,"flexbox-item","fill-area","content","flexbox-item-grow"],[1,"app-page-container"],[3,"formGroup"],["label","Username","placeholder","Username","formControlName","username","appCustomControl","","required",""],["label","Password","placeholder","Password","formControlName","password","appCustomControl","","required",""],["label","Notes","placeholder","Notes","formControlName","notes","appCustomControl",""],["label","Start Date","placeholder","Start Date","formControlName","startDate","appCustomControl","","required","","date-format","yyyy-mm-dd"],["label","End Date","placeholder","End Date","formControlName","endDate","appCustomControl","","required","","date-format","yyyy-mm-dd"],["class","err",4,"ngIf"],[1,"form-test__actions"],["submit","",3,"disabled","loading","click"],[3,"click"],[3,"ngClass"],[3,"form"],[1,"err"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"h2"),d._uU(4,"Reactive Forms"),d.qZA(),d.TgZ(5,"p"),d._uU(6," The following form is a showcase for the functionality of custom-control directive which allows to use the six webcomponents in combination with reactive forms. "),d.qZA(),d.TgZ(7,"p"),d._uU(8," Play around with the form to discover how the capability of reactive forms are working in combination with six webcomponents: "),d.qZA(),d.TgZ(9,"ul"),d.TgZ(10,"li"),d._uU(11,' Write a single character into the "username" input field '),d.TgZ(12,"ul"),d.TgZ(13,"li"),d._uU(14," Syncronous validation for username is trigger and an error message will be shown on the username input field because the username requires at least two characters "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(15,"li"),d._uU(16,' Write user into the "username" input field and wait a moment '),d.TgZ(17,"ul"),d.TgZ(18,"li"),d._uU(19," Asyncronous validation for username is triggered and an error message will be shown on the username input field because this user already exists "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"li"),d._uU(21,' Write a "user1" into the username input field and "password1" into the password input field and press the submit button '),d.TgZ(22,"ul"),d.TgZ(23,"li"),d._uU(24,"The form will be successfully submitted"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(25,"li"),d._uU(26,' Write a "user1" into the username input field and "password1" into the password input field and press the reset button '),d.TgZ(27,"ul"),d.TgZ(28,"li"),d._uU(29,"The form will be successfully reset"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(30,"li"),d._uU(31,' Write a "error" into the username input field and "password1" into the password input field and press submit '),d.TgZ(32,"ul"),d.TgZ(33,"li"),d._uU(34," Asyncronous validation after submit will be triggered and an error message will be shown on the username input field "),d.qZA(),d.TgZ(35,"li"),d._uU(36," Now press the reset button "),d.TgZ(37,"ul"),d.TgZ(38,"li"),d._uU(39,"The whole form should again have initial state"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(40,"li"),d._uU(41," Make the form show any error and press reset "),d.TgZ(42,"ul"),d.TgZ(43,"li"),d._uU(44,"The form will be reset and no error message should be shown anymore"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(45,"li"),d._uU(46," Play around with start date and end date. An error message will be shown when the end date is before the start date "),d.qZA(),d.qZA(),d.TgZ(47,"form",3),d.TgZ(48,"div"),d._UZ(49,"six-input",4),d._UZ(50,"six-input",5),d._UZ(51,"six-input",6),d._UZ(52,"six-datepicker",7),d._UZ(53,"six-datepicker",8),d.qZA(),d.YNc(54,q,3,3,"p",9),d.ALo(55,"async"),d.TgZ(56,"div",10),d.TgZ(57,"six-button",11),d.NdJ("click",function(){return t.submitForm()}),d.ALo(58,"async"),d._uU(59,"submit "),d.qZA(),d.TgZ(60,"six-button",12),d.NdJ("click",function(){return t.resetForm()}),d._uU(61,"reset"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(62,"div",13),d._uU(63),d.qZA(),d._UZ(64,"app-debug-form",14),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(47),d.Q6J("formGroup",t.form),d.xp6(7),d.Q6J("ngIf",d.lcZ(55,7,t.formTestFacade.lastError$)),d.xp6(3),d.Q6J("disabled",t.submitDisabled)("loading",d.lcZ(58,9,t.loading$)),d.xp6(5),d.Q6J("ngClass",d.WLB(11,x,!t.form.invalid,t.form.invalid)),d.xp6(1),d.hij(" Form Status: ",t.form.invalid?"invalid":"valid"," "),d.xp6(1),d.Q6J("form",t.form))},directives:[s._Y,s.JL,s.sg,s.JJ,s.u,_.y,s.Q7,i.O5,i.mk,y.Q],pipes:[i.Ov,A],styles:[".err{font-size:.9rem;color:red}.form-test__actions{margin-top:1rem}.form-test__actions six-button{margin-right:.25rem}.form__status{color:#fff;padding:.5rem;height:1.5rem;margin-bottom:.5rem;margin-top:1.5rem;width:9.5rem}.form__status--valid{background:green}.form__status--invalid{background:red}"],encapsulation:3,changeDetection:0}),e})();const C=[A];var k=r(5425);const E=[{path:"",component:D}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[p,f,...C],imports:[[i.ez,s.u5,s.UX,a.Bz.forChild(E),k.m]]}),e})()}}]);