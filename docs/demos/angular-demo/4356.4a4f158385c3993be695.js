(self.webpackChunksix_app=self.webpackChunksix_app||[]).push([[4356],{4356:(e,t,i)=>{"use strict";i.r(t),i.d(t,{six_dropdown:()=>v,six_menu:()=>b,six_menu_item:()=>y});var s=i(6304),n=i(1488),o=i(9393),r=i(8409),l=i(3655),h=i(1376),a=i(4326);function d(e){return e.tabIndex>-1}function u(e){if(d(e))return e;if(e.shadowRoot){const t=[...e.shadowRoot.children].find(d);if(t)return t}return e.children?[...e.children].map(u)[0]:null}const c=e=>t=>(null==t?void 0:t.tagName.toLowerCase())===e.toLowerCase(),p=c("six-menu"),m=c("six-menu-item");let g=0,v=class{constructor(e){(0,n.r)(this,e),this.sixShow=(0,n.c)(this,"six-dropdown-show",7),this.sixAfterShow=(0,n.c)(this,"six-dropdown-after-show",7),this.sixHide=(0,n.c)(this,"six-dropdown-hide",7),this.sixAfterHide=(0,n.c)(this,"six-dropdown-after-hide",7),this.sixAutoFilterFired=(0,n.c)(this,"six-dropdown-auto-filter-fired",7),this.sixAsyncFilterFired=(0,n.c)(this,"six-async-filter-fired",7),this.sixScroll=(0,n.c)(this,"six-dropdown-scroll",7),this.componentId="dropdown-"+ ++g,this.isVisible=!1,this.hasBeenInitialized=!1,this.open=!1,this.placement="bottom-start",this.closeOnSelect=!0,this.distance=0,this.skidding=0,this.hoist=!1,this.filter=!1,this.asyncFilter=!1,this.filterPlaceholder="Filter...",this.autofocusFilter=!0,this.filterDebounce=a.D,this.disableHideOnEnterAndSpace=!1,this.options=null,this.virtualScroll=!1,this.eventListeners=new l.E,this._options=null,this.getMenuItems=()=>{if(null!==this._options)return this._options.map(e=>(0,n.h)("six-menu-item",{value:e.value},e.label));const[e]=(0,h.b)(this.panel);return(0,h.b)(e)||Array.from(e.querySelectorAll("six-menu-item"))},this.handleFilterInputChange=()=>{var e,t;const i=(null===(t=null===(e=this.filterInputElement.value)||void 0===e?void 0:e.toLowerCase())||void 0===t?void 0:t.trim())||"";this._options?this.handleFilteringForAttributeItems(i):this.handleFilteringForSlotItems(i),this.sixAutoFilterFired.emit({filterValue:i})}}get hasFilterEnabled(){return this.filter||this.asyncFilter}get container(){return this.containingElement||this.host}handleOpenChange(){this.open?this.show():this.hide(),this.updateAccessibleTrigger()}handlePopoverOptionsChange(){this.popover.setOptions({strategy:this.hoist?"fixed":"absolute",placement:this.placement,distance:this.distance,skidding:this.skidding})}handleOptionsChange(){this._options=[...this.options]}connectedCallback(){this.virtualScroll&&null===this.options&&console.error("Options must be defined when using virtual scrolling"),null!==this.options&&(this._options=[...this.options]),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.handleDocumentMouseDown=this.handleDocumentMouseDown.bind(this),this.handleMenuItemActivate=this.handleMenuItemActivate.bind(this),this.handlePanelSelect=this.handlePanelSelect.bind(this),this.handleTriggerClick=this.handleTriggerClick.bind(this),this.handleTriggerKeyDown=this.handleTriggerKeyDown.bind(this),this.handleTriggerKeyUp=this.handleTriggerKeyUp.bind(this),this.handleTriggerSlotChange=this.handleTriggerSlotChange.bind(this),this.handleDropdownScroll=this.handleDropdownScroll.bind(this),this.hasBeenInitialized&&!this.popover&&this.initializePopover()}componentDidLoad(){this.hasBeenInitialized=!0,this.initializePopover(),this.open&&this.show(),this.filter?this.setupFiltering(this.handleFilterInputChange):this.asyncFilter&&this.setupFiltering(()=>this.sixAsyncFilterFired.emit({filterValue:this.filterInputElement.value}))}initializePopover(){var e=this;this.popover=new r.P(this.trigger,this.positioner,{strategy:this.hoist?"fixed":"absolute",placement:this.placement,distance:this.distance,skidding:this.skidding,transitionElement:this.panel,onAfterHide:()=>{this.filter&&(this.filterInputElement.value="",null!==this._options?this._options=[...this.options]:this.getMenuItems().forEach(e=>e.style.display="unset")),this.sixAfterHide.emit()},onAfterShow:function(){var t=(0,s.Z)(function*(){e.hasFilterEnabled&&e.autofocusFilter&&(yield e.filterInputElement.setFocus()),e.sixAfterShow.emit()});return function(){return t.apply(this,arguments)}}(),onTransitionEnd:()=>{this.open||(this.panel.scrollTop=0)}})}setupFiltering(e){this.eventListeners.add(this.filterInputElement,"six-input-input",(0,a.a)(e,this.filterDebounce))}handleFilteringForAttributeItems(e){this._options=""!==e?this.options.filter(t=>{var i,s,n,o;return t.label&&(null===(s=null===(i=String(t.label))||void 0===i?void 0:i.toLowerCase())||void 0===s?void 0:s.includes(e))||t.value&&(null===(o=null===(n=String(t.value))||void 0===n?void 0:n.toLowerCase())||void 0===o?void 0:o.includes(e))}):[...this.options]}handleFilteringForSlotItems(e){this.getMenuItems().forEach(t=>{var i,s;const n=null===(i=null==t?void 0:t.value)||void 0===i?void 0:i.toLowerCase(),o=null===(s=null==t?void 0:t.innerText)||void 0===s?void 0:s.toLowerCase(),r=(null==n?void 0:n.includes(e))||(null==o?void 0:o.includes(e));t.style.display=r?"unset":"none"})}disconnectedCallback(){this.eventListeners.removeAll(),this.hide(),this.popover.destroy(),this.popover=null}show(){var e=this;return(0,s.Z)(function*(){e.isVisible||(e.sixShow.emit().defaultPrevented?e.open=!1:(e.eventListeners.add(e.panel,"six-menu-item-selected",e.handlePanelSelect),e.eventListeners.add(document,"keydown",e.handleDocumentKeyDown),e.eventListeners.add(document,"mousedown",e.handleDocumentMouseDown),e.isVisible=!0,e.open=!0,e.popover.show()))})()}hide(){var e=this;return(0,s.Z)(function*(){e.isVisible&&(e.sixHide.emit().defaultPrevented?e.open=!0:(e.eventListeners.remove(e.panel,"six-menu-item-selected",e.handlePanelSelect),e.eventListeners.remove(document,"keydown",e.handleDocumentKeyDown),e.eventListeners.remove(document,"mousedown",e.handleDocumentMouseDown),e.isVisible=!1,e.open=!1,e.popover.hide()))})()}focusOnTrigger(){const[e]=(0,h.b)(this.trigger);e&&("function"==typeof e.setFocus?e.setFocus():"function"==typeof e.focus&&e.focus())}getMenu(){const[e]=(0,h.b)(this.panel).filter(p);return e}reposition(){var e=this;return(0,s.Z)(function*(){e.open&&e.popover.reposition()})()}handleDocumentKeyDown(e){if("Escape"===e.key)return this.hide(),void this.focusOnTrigger();if(this.filterInputElement===this.host.shadowRoot.activeElement&&"ArrowDown"===e.key){const e=this.getMenuItems().find(e=>"none"!==e.style.display);e&&e.setFocus()}if("Tab"===e.key){if(this.open&&m(document.activeElement))return e.preventDefault(),this.hide(),void this.focusOnTrigger();setTimeout(()=>{var e;const t=this.container.getRootNode()instanceof ShadowRoot?null===(e=document.activeElement.shadowRoot)||void 0===e?void 0:e.activeElement:document.activeElement;(null==t?void 0:t.closest(this.container.tagName.toLowerCase()))===this.container||this.hide()})}}handleDocumentMouseDown(e){e.composedPath().includes(this.container)||this.hide()}handleMenuItemActivate(e){(0,o.s)(e.target,this.panel)}handlePanelSelect(e){this.closeOnSelect&&p(e.target)&&(this.hide(),this.focusOnTrigger())}handleTriggerClick(){this.open?this.hide():this.show()}handleTriggerKeyDown(e){const t=this.getMenu(),i=t?[...t.querySelectorAll("six-menu-item")]:null,s=i[0],n=i[i.length-1];if("Escape"===e.key)return this.focusOnTrigger(),void this.hide();if(!this.disableHideOnEnterAndSpace&&[" ","Enter"].includes(e.key))return e.preventDefault(),void(this.open?this.hide():this.show());if(["ArrowDown","ArrowUp"].includes(e.key)){if(e.preventDefault(),this.open||this.show(),"ArrowDown"===e.key&&s)return void s.setFocus();if("ArrowUp"===e.key&&n)return void n.setFocus()}this.open&&t&&!["Tab","Shift","Meta","Ctrl","Alt"].includes(e.key)&&t.typeToSelect(e.key)}handleTriggerKeyUp(e){" "===e.key&&e.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}handleDropdownScroll(){this.sixScroll.emit({scrollHeight:this.panel.scrollHeight,scrollTop:this.panel.scrollTop,scrollbarHeight:this.panel.offsetHeight*(this.panel.offsetHeight/this.panel.scrollHeight),scrollRatio:this.panel.scrollTop/(this.panel.scrollHeight-this.panel.clientHeight)})}updateAccessibleTrigger(){const[e]=(0,h.b)(this.trigger).map(u);e&&(e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded",this.open?"true":"false"))}render(){return(0,n.h)("div",{part:"base",id:this.componentId,class:{dropdown:!0,"dropdown--open":this.open}},(0,n.h)("span",{part:"trigger",class:"dropdown__trigger",ref:e=>this.trigger=e,onClick:this.handleTriggerClick,onKeyDown:this.handleTriggerKeyDown,onKeyUp:this.handleTriggerKeyUp},(0,n.h)("slot",{name:"trigger",onSlotchange:this.handleTriggerSlotChange})),(0,n.h)("div",{ref:e=>this.positioner=e,class:{dropdown__positioner:!0,dropdown__positioner__filtered:(this.filter||this.asyncFilter)&&!this.hoist}},this.hasFilterEnabled&&(0,n.h)("six-input",{class:{"filter-hidden":!this.open},"aria-hidden":this.open?"false":"true",ref:e=>this.filterInputElement=e,placeholder:this.filterPlaceholder}),(0,n.h)("div",{ref:e=>this.panel=e,part:"panel",class:"dropdown__panel",role:"menu","aria-hidden":this.open?"false":"true","aria-labelledby":this.componentId,onScroll:this.handleDropdownScroll},(0,n.h)("slot",null),this._options&&(0,n.h)("six-menu",{part:"menu",items:this._options,virtualScroll:this.virtualScroll}))))}get host(){return(0,n.g)(this)}static get watchers(){return{open:["handleOpenChange"],distance:["handlePopoverOptionsChange"],hoist:["handlePopoverOptionsChange"],placement:["handlePopoverOptionsChange"],skidding:["handlePopoverOptionsChange"],options:["handleOptionsChange"]}}};v.style=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:inherit}:host{display:inline-block}.dropdown{position:relative}.dropdown__trigger{display:block}.dropdown__positioner{position:absolute;z-index:var(--six-z-index-dropdown)}.dropdown__positioner__filtered{width:100%}.dropdown__panel{max-height:50vh;font-family:var(--six-font-sans);font-size:var(--six-font-size-small);font-weight:var(--six-font-weight-normal);color:var(--color);background-color:var(--six-panel-background-color);border-radius:var(--six-border-radius-medium);box-shadow:var(--six-elevation-2dp);opacity:0;overflow:auto;overscroll-behavior:none;pointer-events:none;transform:scale(0.9);transition:var(--six-transition-fast) opacity, var(--six-transition-fast) transform;scrollbar-width:thin}.filter-hidden{display:none}.dropdown__positioner[data-popper-placement^=top] .dropdown__panel{transform-origin:bottom}.dropdown__positioner[data-popper-placement^=bottom] .dropdown__panel{transform-origin:top}.dropdown__positioner[data-popper-placement^=left] .dropdown__panel{transform-origin:right}.dropdown__positioner[data-popper-placement^=right] .dropdown__panel{transform-origin:left}.dropdown__positioner.popover-visible .dropdown__panel{opacity:1;transform:none;pointer-events:all}";const f=e=>{var t,i,s;return null===(s=null===(i=null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector(".menu-item"))||void 0===i?void 0:i.classList)||void 0===s?void 0:s.contains("menu-item--focused")},w=({value:e,label:t})=>(0,n.h)("six-menu-item",{value:e},t),x=void 0;let b=class{constructor(e){(0,n.r)(this,e),this.sixMenuItemSelected=(0,n.c)(this,"six-menu-item-selected",7),this.eventListeners=new l.E,this.typeToSelectString="",this.removeBoxShadow=!1,this.items=null,this.itemsShown=x,this.virtualScroll=!1,this.itemSize=10,this.scrollingDebounce=15,this.scrollingIndex=0,this.sixMenuItemHeight=64,this.handleScrolling=()=>{this.scrollingIndex=Math.floor(this.menuWrapper.scrollTop/this.sixMenuItemHeight)}}connectedCallback(){this.handleClick=this.handleClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}componentWillLoad(){}componentDidLoad(){this.setupForVirtualScrollingAfterRendering()}disconnectedCallback(){this.eventListeners.removeAll()}typeToSelect(e){var t=this;return(0,s.Z)(function*(){var i;clearTimeout(t.typeToSelectTimeout),t.typeToSelectTimeout=setTimeout(()=>t.typeToSelectString="",750),t.typeToSelectString+=e.toLowerCase();const s=t.getItems();for(const e of s){const s=null===(i=e.shadowRoot)||void 0===i?void 0:i.querySelector("slot:not([name])");if((0,h.a)(s).toLowerCase().trim().substring(0,t.typeToSelectString.length)===t.typeToSelectString){e.setFocus();break}}})()}getItemsShown(){var e;return null!==(e=this.itemsShown)&&void 0!==e?e:this.virtualScroll?5:x}setupForVirtualScrollingAfterRendering(){var e,t;if(!this.virtualScroll)return;this.eventListeners.add(this.menuWrapper,"scroll",(0,a.a)(this.handleScrolling,this.scrollingDebounce));const i=null===(t=null===(e=this.menu)||void 0===e?void 0:e.querySelector("six-menu-item"))||void 0===t?void 0:t.clientHeight;i&&i>0&&(this.sixMenuItemHeight=i)}getItems(){return null!=this.items?this.items.map(w):[...this.menu.querySelector("slot").assignedElements({flatten:!0})].filter(e=>(e=>"six-menu-item"===(null==e?void 0:e.tagName.toLowerCase()))(e)&&!e.disabled)}getActiveItemIndex(){const e=this.getItems(),t=this.getActiveItem(),i=e.indexOf(t);return i>-1?i:this.extractItemsFromDOM().findIndex(f)}getActiveItem(){var e;return this.getItems().find(e=>e===document.activeElement)||(null===(e=this.extractItemsFromDOM())||void 0===e?void 0:e.find(f))}extractItemsFromDOM(){var e,t;return Array.from(null===(t=null===(e=this.host)||void 0===e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelectorAll("six-menu-item"))}setActiveItem(e){e.setFocus()}handleClick(e){const t=e.target.closest("six-menu-item");t&&!t.disabled&&this.sixMenuItemSelected.emit({name:t.value,item:t})}handleKeyDown(e){if("Enter"===e.key){const t=this.getActiveItem();e.preventDefault(),t&&this.sixMenuItemSelected.emit({name:t.value,item:t})}if(" "===e.key&&e.preventDefault(),["ArrowDown","ArrowUp","Home","End"].includes(e.key)){const t=null===this.items?this.getItems():this.extractItemsFromDOM();let i=this.getActiveItemIndex();if(t.length)return e.preventDefault(),"ArrowDown"===e.key?i++:"ArrowUp"===e.key?i--:"Home"===e.key?i=0:"End"===e.key&&(i=t.length-1),i<0&&(i=0),i>t.length-1&&(i=t.length-1),void this.setActiveItem(t[i])}this.typeToSelect(e.key)}getMenuWrapperStyle(){const e={};return this.getItemsShown()>0&&(e.height=this.getItemsShown()*this.sixMenuItemHeight+"px"),Object.assign({},e)}getMenuContainerStyle(){const e={};return this.virtualScroll&&(e.transform=`translateY(${this.sixMenuItemHeight*this.scrollingIndex}px)`),Object.assign({},e)}getScrollbarGhostStyle(){const e={};return this.virtualScroll&&null!==this.items&&(e.height=this.items.length*this.sixMenuItemHeight-this.itemSize*this.sixMenuItemHeight+"px"),Object.assign({},e)}renderItems(){if(null!=this.items)return this.virtualScroll?this.items.slice(this.scrollingIndex,Math.min(this.items.length,this.itemSize+this.scrollingIndex)).map(w):this.items.map(w)}render(){return(0,n.h)("div",{ref:e=>this.menuWrapper=e,style:this.getMenuWrapperStyle(),part:"wrapper",class:{menu:!0,"menu--noshadow":this.removeBoxShadow,"menu__wrapper--scrollable":this.getItemsShown()>0}},(0,n.h)("div",{ref:e=>this.menu=e,part:"base",role:"menu",onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:0,style:this.getMenuContainerStyle()},(0,n.h)("slot",null),this.renderItems()),this.virtualScroll&&(0,n.h)("div",{style:this.getScrollbarGhostStyle()}))}get host(){return(0,n.g)(this)}};b.style=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:inherit}:host{display:block}.menu{padding:0 0;border:none;box-shadow:var(--six-elevation-2dp)}.menu:focus{outline:none}.menu--noshadow{box-shadow:none}.menu__wrapper--scrollable{overflow-y:auto}";let y=class{constructor(e){(0,n.r)(this,e),this.hasFocus=!1,this.checked=!1,this.value="",this.disabled=!1}connectedCallback(){this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this)}setFocus(e){var t=this;return(0,s.Z)(function*(){t.menuItem.focus(e)})()}removeFocus(){var e=this;return(0,s.Z)(function*(){e.menuItem.blur()})()}handleBlur(){this.hasFocus=!1}handleFocus(){this.hasFocus=!0}handleMouseEnter(){this.setFocus()}handleMouseLeave(){this.removeFocus()}render(){return(0,n.h)("div",{ref:e=>this.menuItem=e,part:"base",class:{"menu-item":!0,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--focused":this.hasFocus},role:"menuitem","aria-disabled":this.disabled?"true":"false","aria-checked":this.checked?"true":"false",tabIndex:this.disabled?null:0,onFocus:this.handleFocus,onBlur:this.handleBlur,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},(0,n.h)("span",{part:"prefix",class:"menu-item__prefix"},(0,n.h)("slot",{name:"prefix"})),(0,n.h)("span",{part:"label",class:"menu-item__label"},(0,n.h)("slot",null)),(0,n.h)("span",{part:"suffix",class:"menu-item__suffix"},(0,n.h)("slot",{name:"suffix"})),(0,n.h)("span",{part:"checked-icon",class:"menu-item__check"},(0,n.h)("six-icon",{size:"small","aria-hidden":"true"},"check")))}};y.style=":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:inherit}:host{display:block}.menu-item{position:relative;display:flex;align-items:stretch;font-family:var(--six-font-sans);font-size:var(--six-font-size-small);font-weight:var(--six-font-weight-normal);line-height:var(--six-line-height-normal);letter-spacing:var(--six-letter-spacing-normal);text-align:left;color:var(--six-input-color);border-radius:var(--six-border-radius-medium);padding:var(--six-spacing-medium) var(--six-spacing-medium);transition:var(--six-transition-fast) fill;user-select:none;white-space:nowrap;cursor:pointer}.menu-item.menu-item--focused:not(.menu-item--disabled){outline:none;background-color:var(--six-menu-item-background-color)}.menu-item.menu-item--disabled{outline:none;color:var(--six-input-color-disabled);cursor:not-allowed}.menu-item .menu-item__label{flex:1 1 auto;align-self:center}.menu-item .menu-item__prefix{flex:0 0 auto;display:flex;align-items:center}.menu-item .menu-item__prefix ::slotted(:last-child){margin-right:0.5em}.menu-item .menu-item__suffix{flex:0 0 auto;display:flex;align-items:center}.menu-item .menu-item__suffix ::slotted(:first-child){margin-left:0.5em}.menu-item .menu-item__check{flex:0 0 auto;display:flex;align-items:center;margin-left:var(--six-spacing-small);visibility:hidden;font-size:inherit}.menu-item--checked .menu-item__check{visibility:visible}"}}]);