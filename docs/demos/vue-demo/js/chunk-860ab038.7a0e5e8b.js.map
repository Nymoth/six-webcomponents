{"version":3,"sources":["webpack:///./node_modules/@six/ui-library/dist/esm/event-listeners-1bef934e.js","webpack:///./node_modules/@six/ui-library/dist/esm/slot-5253e199.js","webpack:///./node_modules/@six/ui-library/dist/esm/type-check-83470bc1.js","webpack:///./node_modules/@six/ui-library/dist/esm/execution-control-235f5126.js","webpack:///./node_modules/@six/ui-library/dist/esm/six-datepicker.entry.js"],"names":["equals","a","b","Object","keys","every","key","EventListeners","this","eventListeners","add","el","name","listener","identifier","push","addEventListener","remove","sameItem","getFilteredEventListeners","removeByIdentifier","foundListener","undefined","find","removeAll","length","pop","removeEventListener","filter","item","getTextContent","slot","nodes","assignedNodes","flatten","text","map","node","nodeType","Node","TEXT_NODE","textContent","hasSlot","querySelector","Array","from","childNodes","some","trim","ELEMENT_NODE","hasAttribute","fromPairs","acc","k","v","assign","getAvailableSlots","slots","host","values","reduce","getSlotChildren","_a","assignedElements","isString","value","isNil","isDate","Date","isNumber","DEFAULT_DEBOUNCE_INSANELY_FAST","DEFAULT_DEBOUNCE_FAST","debounce","callback","timeout","timer","args","clearTimeout","setTimeout","apply","debounceEvent","event","original","_original","emit","bind","i18nDate","en","months","monthsShort","monthsShortGrouped","weekdays","weekdaysShort","weekdaysMin","de","fr","it","now","isValidDate","isNaN","getTime","toString","year","date","getFullYear","Error","month","getMonth","day","getDate","getFirstDayOfTheWeek","weekdayDiff","setDate","getDay","isSameYear","isSameMonth","isSameDay","isSameWeek","isValidDateString","datestring","format","getDateParts","toDate","isInRange","minDate","maxDate","lookAhead","iFormat","match","increment","followingCharacterMatches","charAt","hasProperLength","formatNumber","len","num","String","formatDate","locale","output","weekdayIndex","monthIndex","FORMATTING_TOKENS","TWO_NUMERICS_REGEX","FOUR_NUMERICS_REGEX","NON_NUMERIC_REGEX","YEAR","MONTH","DAY","parseFlags","addParseFlag","token","regex","tokens","isArray","func","input","parseInt","forEach","cent","Math","floor","getFullInputArray","backupDate","result","backupArr","useBackup","i","createDate","isFinite","setFullYear","makeParser","dateString","mark","parseTo","parser","exec","obj","replace","word","indexOf","substr","getCleanDateString","dirtyDateString","separator","split","s","join","inputArray","parsedDate","e","NaN","createCalendarGrid","calendarGridArguments","firstDateOfBox","allowedDates","dateFormat","selectedDate","pointerDate","weekDatePointer","dayDatePointer","calendar","row","display","label","isToday","isSelected","isDisabled","isOutdated","SixDateFormats","MonthSelection","onClickMonthCell","isSelectedMonth","findIndex","m","class","part","onClick","DaySelection","calendarGrid","onClickDateCell","weekday","cell","YearSelection","yearSelection","onClickYearCell","sixDatepickerCss","NUMBER_OF_YEARS_SHOWN","MIN_POPUP_HEIGHT","SelectionMode","getYearSelectionAroundYear","numberOfElementsPerRow","n","curr","index","SixDatepicker","hostRef","sixSelect","sixClear","sixBlur","getCurrentDateAsPointer","selectionMode","isDropDownContentUp","open","inline","readonly","disabled","min","max","closeOnSelect","size","DDMMYYY_DOT","errorOnBlur","errorText","clearable","iconPosition","hoist","defaultValue","handleDocumentKeyDown","stopPropagation","closePopup","inputElement","setFocus","handleDocumentMouseDown","path","composedPath","includes","container","select","selectedMonth","monthShort","handleInputChange","inputValue","inputValueDate","updateIfChanged","datesOnly","isDateValid","updatePointerDates","updateValue","displayCustomMessage","handleOnBlur","formattedDate","isValidValue","console","warn","calcIsDropDownContentUp","moveOpenHoistedPopup","containingElement","reportValidity","checkValidity","message","setCustomValidity","reset","wrapper","inputBoundingRect","getBoundingClientRect","wrapperBoundingRect","minPopupHeight","height","moreSpaceInTop","y","window","innerHeight","bottom","previousMonth","previousYear","previousYearGroup","nextMonth","nextYear","nextYearGroup","setupEventListenersForOpenPopup","document","getPointerDate","differsFromPointerDate","defaultDate","newDate","validateProps","previousUnit","viewBox","width","d","getMonthStringForIndex","points","nextUnit","icon","prefix","type","handleClearClick","tabindex","adjustPopupForHoisting","ref","placeholder","required","openCalendar","renderCustomIcon","renderClearable","popup","datepicker__popup","placement","renderHeader","renderBody","popupBoundingClientRect","popupHeight","inputBoundingClientRect","inputTop","top","inputHeight","style","position","property","popupTop","valid"],"mappings":"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","file":"js/chunk-860ab038.7a0e5e8b.js","sourcesContent":["const equals = (a) => (b) => Object.keys(a).every((key) => a[key] === b[key]);\r\nclass EventListeners {\r\n  constructor() {\r\n    this.eventListeners = [];\r\n    this.add = (el, name, listener, identifier = null) => {\r\n      this.eventListeners.push({ el, name, listener, identifier });\r\n      el.addEventListener(name, listener);\r\n    };\r\n    this.remove = (el, name, listener) => {\r\n      const sameItem = equals({ el, name, listener });\r\n      this.eventListeners = this.getFilteredEventListeners(sameItem);\r\n    };\r\n    this.removeByIdentifier = (identifier) => {\r\n      const sameItem = (el) => el.identifier === identifier;\r\n      const foundListener = this.eventListeners.find(sameItem) !== undefined;\r\n      if (!foundListener) {\r\n        return;\r\n      }\r\n      this.eventListeners = this.getFilteredEventListeners(sameItem);\r\n    };\r\n    this.removeAll = () => {\r\n      while (this.eventListeners.length) {\r\n        const { el, name, listener } = this.eventListeners.pop();\r\n        el.removeEventListener(name, listener);\r\n      }\r\n    };\r\n  }\r\n  getFilteredEventListeners(sameItem) {\r\n    return this.eventListeners.filter((item) => {\r\n      if (sameItem(item)) {\r\n        item.el.removeEventListener(item.name, item.listener);\r\n        return false;\r\n      }\r\n      else {\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n}\n\nexport { EventListeners as E };\n","//\r\n//\r\n// Given a slot, this function iterates over all of its assigned text nodes and returns the concatenated text as a\r\n// string. This is useful because we can't use slot.textContent as an alternative.\r\n//\r\nfunction getTextContent(slot) {\r\n  const nodes = slot ? slot.assignedNodes({ flatten: true }) : [];\r\n  let text = '';\r\n  [...nodes].map((node) => {\r\n    if (node.nodeType === Node.TEXT_NODE) {\r\n      text += node.textContent;\r\n    }\r\n  });\r\n  return text;\r\n}\r\n//\r\n// Determines whether an element has a slot. If name is specified, the function will look for a corresponding named\r\n// slot, otherwise it will look for a \"default\" slot (e.g. a non-empty text node or an element with no slot attribute).\r\n//\r\nfunction hasSlot(el, name) {\r\n  // Look for a named slot\r\n  if (name) {\r\n    return el.querySelector(`[slot=\"${name}\"]`) !== null;\r\n  }\r\n  // Look for a default slot\r\n  return Array.from(el.childNodes).some((node) => {\r\n    if (node.nodeType === node.TEXT_NODE && node.textContent.trim() !== '') {\r\n      return true;\r\n    }\r\n    if (node.nodeType === node.ELEMENT_NODE) {\r\n      const el = node;\r\n      if (!el.hasAttribute('slot')) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  });\r\n}\r\nconst fromPairs = (acc, [k, v]) => (Object.assign(Object.assign({}, acc), { [k]: v }));\r\nconst getAvailableSlots = (slots) => (host) => Object.values(slots)\r\n  .map((name) => [name, hasSlot(host, name)])\r\n  .reduce(fromPairs, {});\r\nconst getSlotChildren = (el) => { var _a; return (_a = el.querySelector('slot')) === null || _a === void 0 ? void 0 : _a.assignedElements({ flatten: true }); };\n\nexport { getTextContent as a, getSlotChildren as b, getAvailableSlots as g, hasSlot as h };\n","const isString = (value) => typeof value === 'string';\r\n// only use '==' instead of '===' to also catch undefined and void\r\nconst isNil = (value) => value == null;\r\nconst isDate = (value) => value instanceof Date;\r\nconst isNumber = (value) => value === 'number';\n\nexport { isNumber as a, isDate as b, isString as c, isNil as i };\n","const DEFAULT_DEBOUNCE_INSANELY_FAST = 35;\r\nconst DEFAULT_DEBOUNCE_FAST = 300;\r\n/**\r\n * Debounce function to implement a timeframe to wait for no new changes before executing a callback\r\n\r\n *  example usages:\r\n *    debounce(() => saveInput());\r\n *    debounce(() => saveInput(), 750);\r\n *    this.searchInput.addEventListener('six-input-input', debounce((event) => this.searchInputChange(event)));\r\n *\r\n *  regarding default timeout check https://lawsofux.com/doherty-threshold/\r\n *\r\n * @param callback\r\n * @param timeout\r\n */\r\nconst debounce = (callback, timeout = DEFAULT_DEBOUNCE_FAST) => {\r\n  let timer;\r\n  return (...args) => {\r\n    clearTimeout(timer);\r\n    timer = setTimeout(() => callback.apply(undefined, args), timeout);\r\n  };\r\n};\r\n/**\r\n * Debounce an event\r\n *\r\n * @param event\r\n * @param timeout\r\n */\r\nconst debounceEvent = (event, timeout) => {\r\n  const original = event._original || event;\r\n  const emit = debounce(original.emit.bind(original), timeout);\r\n  return {\r\n    _original: event,\r\n    emit: emit,\r\n  };\r\n};\n\nexport { DEFAULT_DEBOUNCE_FAST as D, debounce as a, DEFAULT_DEBOUNCE_INSANELY_FAST as b, debounceEvent as d };\n","import { h, r as registerInstance, c as createEvent, g as getElement } from './index-a2605a62.js';\nimport { i as isNil, a as isNumber, b as isDate, c as isString } from './type-check-83470bc1.js';\nimport { E as EventListeners } from './event-listeners-1bef934e.js';\nimport { D as DEFAULT_DEBOUNCE_FAST, d as debounceEvent, a as debounce } from './execution-control-235f5126.js';\nimport { h as hasSlot } from './slot-5253e199.js';\n\nconst i18nDate = {\r\n  en: {\r\n    months: [\r\n      'January',\r\n      'February',\r\n      'March',\r\n      'April',\r\n      'May',\r\n      'June',\r\n      'July',\r\n      'August',\r\n      'September',\r\n      'October',\r\n      'November',\r\n      'December',\r\n    ],\r\n    monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n    monthsShortGrouped: [\r\n      ['Jan', 'Feb', 'Mar', 'Apr'],\r\n      ['May', 'Jun', 'Jul', 'Aug'],\r\n      ['Sep', 'Oct', 'Nov', 'Dec'],\r\n    ],\r\n    weekdays: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],\r\n    weekdaysShort: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\r\n    weekdaysMin: ['Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa', 'Su'],\r\n  },\r\n  de: {\r\n    months: [\r\n      'Januar',\r\n      'Februar',\r\n      'März',\r\n      'April',\r\n      'Mai',\r\n      'Juni',\r\n      'Juli',\r\n      'August',\r\n      'September',\r\n      'Oktober',\r\n      'November',\r\n      'Dezember',\r\n    ],\r\n    monthsShort: ['Jan.', 'Feb.', 'März', 'Apr.', 'Mai', 'Juni', 'Juli', 'Aug.', 'Sep.', 'Okt.', 'Nov.', 'Dez.'],\r\n    monthsShortGrouped: [\r\n      ['Jan.', 'Feb.', 'März', 'Apr.'],\r\n      ['Mai', 'Juni', 'Juli', 'Aug.'],\r\n      ['Sep.', 'Okt.', 'Nov.', 'Dez.'],\r\n    ],\r\n    weekdays: ['Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag', 'Sonntag'],\r\n    weekdaysShort: ['Mo.', 'Di.', 'Mi.', 'Do.', 'Fr.', 'Sa.', 'So.'],\r\n    weekdaysMin: ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'],\r\n  },\r\n  fr: {\r\n    months: [\r\n      'janvier',\r\n      'février',\r\n      'mars',\r\n      'avril',\r\n      'mai',\r\n      'juin',\r\n      'juillet',\r\n      'août',\r\n      'septembre',\r\n      'octobre',\r\n      'novembre',\r\n      'décembre',\r\n    ],\r\n    monthsShort: ['janv.', 'févr.', 'mars', 'avr.', 'mai', 'juin', 'juil.', 'août', 'sept.', 'oct.', 'nov.', 'déc.'],\r\n    monthsShortGrouped: [\r\n      ['janv.', 'févr.', 'mars', 'avr.'],\r\n      ['mai', 'juin', 'juil.', 'août'],\r\n      ['sept.', 'oct.', 'nov.', 'déc.'],\r\n    ],\r\n    weekdays: ['lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi', 'dimanche'],\r\n    weekdaysShort: ['lun.', 'mar.', 'mer.', 'jeu.', 'ven.', 'sam.', 'dim.'],\r\n    weekdaysMin: ['lu', 'ma', 'me', 'je', 've', 'sa', 'di'],\r\n  },\r\n  it: {\r\n    months: [\r\n      'gennaio',\r\n      'febbraio',\r\n      'marzo',\r\n      'aprile',\r\n      'maggio',\r\n      'giugno',\r\n      'luglio',\r\n      'agosto',\r\n      'settembre',\r\n      'ottobre',\r\n      'novembre',\r\n      'dicembre',\r\n    ],\r\n    monthsShort: ['gen', 'feb', 'mar', 'apr', 'mag', 'giu', 'lug', 'ago', 'set', 'ott', 'nov', 'dic'],\r\n    monthsShortGrouped: [\r\n      ['gen', 'feb', 'mar', 'apr'],\r\n      ['mag', 'giu', 'lug', 'ago'],\r\n      ['set', 'ott', 'nov', 'dic'],\r\n    ],\r\n    weekdays: ['lunedì', 'martedì', 'mercoledì', 'giovedì', 'venerdì', 'sabato', 'domenica'],\r\n    weekdaysShort: ['lun', 'mar', 'mer', 'gio', 'ven', 'sab', 'dom'],\r\n    weekdaysMin: ['lu', 'ma', 'me', 'gi', 've', 'sa', 'do'],\r\n  },\r\n};\r\n/**\r\n * Returns a JS Date instance of the exact moment\r\n *\r\n * ```typescript\r\n * const date = now()\r\n * // Wed Mar 10 2021 20:30:32 GMT+0100 (Central European Standard Time)\r\n * ```\r\n */\r\nconst now = () => new Date();\r\n/**\r\n * Returns `true` if the given date is valid\r\n */\r\nconst isValidDate = (value) => {\r\n  if (isNil(value)) {\r\n    return false;\r\n  }\r\n  if (isNumber(value)) {\r\n    return false;\r\n  }\r\n  if (isDate(value)) {\r\n    return !isNaN(value.getTime());\r\n  }\r\n  return new Date(value).toString() !== 'Invalid Date';\r\n};\r\n/**\r\n * Returns the year number of the given date\r\n *\r\n * ```typescript\r\n * year(new Date(2020, 0, 1)) // 2020\r\n * ```\r\n */\r\nconst year = (date) => {\r\n  if (date && isValidDate(date)) {\r\n    return date.getFullYear();\r\n  }\r\n  throw new Error('Not a valid date');\r\n};\r\n/**\r\n * Returns the month number of the given date\r\n *\r\n * ```typescript\r\n * month(new Date(2020, 0, 1)) // 0\r\n * ```\r\n */\r\nconst month = (date) => {\r\n  if (date && isValidDate(date)) {\r\n    return date.getMonth();\r\n  }\r\n  throw new Error('Not a valid date');\r\n};\r\n/**\r\n * Returns the day number of the given date\r\n *\r\n * ```typescript\r\n * day(new Date(2020, 0, 1)) // 1\r\n * ```\r\n */\r\nconst day = (date) => {\r\n  if (date && isValidDate(date)) {\r\n    return date.getDate();\r\n  }\r\n  throw new Error('Not a valid date');\r\n};\r\n/**\r\n * Returns the first day of the week of the given date.\r\n */\r\nconst getFirstDayOfTheWeek = (date) => {\r\n  const weekdayDiff = [6, 0, 1, 2, 3, 4, 5];\r\n  const day = new Date(date);\r\n  day.setDate(day.getDate() - weekdayDiff[day.getDay()]);\r\n  return day;\r\n};\r\n/**\r\n * Returns `true` when the year of the dates are the same\r\n */\r\nconst isSameYear = (a, b) => (a === null || a === void 0 ? void 0 : a.getFullYear()) === (b === null || b === void 0 ? void 0 : b.getFullYear());\r\n/**\r\n * Returns `true` when the month of the dates are the same\r\n */\r\nconst isSameMonth = (a, b) => isSameYear(a, b) && (a === null || a === void 0 ? void 0 : a.getMonth()) === (b === null || b === void 0 ? void 0 : b.getMonth());\r\n/**\r\n * Returns `true` when the day of the dates are the same\r\n */\r\nconst isSameDay = (a, b) => isSameMonth(a, b) && (a === null || a === void 0 ? void 0 : a.getDate()) === (b === null || b === void 0 ? void 0 : b.getDate());\r\n/**\r\n * Returns `true` when the week of the dates are the same\r\n */\r\nconst isSameWeek = (a, b) => isSameDay(getFirstDayOfTheWeek(a), getFirstDayOfTheWeek(b));\r\n/**\r\n * Returns `true` if the given datestring is valid\r\n */\r\nconst isValidDateString = (datestring, format) => {\r\n  if (!isString(datestring) || !isString(format)) {\r\n    return false;\r\n  }\r\n  if (datestring.length < 6 || format.length < 6) {\r\n    return false;\r\n  }\r\n  const { day, month } = getDateParts(datestring, format);\r\n  if (day > 31 || month > 11 || day <= 0 || month < 0) {\r\n    return false;\r\n  }\r\n  const date = toDate(datestring, format);\r\n  if (isNil(date)) {\r\n    return false;\r\n  }\r\n  return date.toString() !== 'Invalid Date';\r\n};\r\n/**\r\n * Returns `true` when the given date is not smaller than the minDate and not bigger than the maxDate.\r\n *\r\n * ```typescript\r\n * isInRange(new Date(2020, 1, 1), new Date(2020, 0, 1), new Date(2020, 2, 1)) // true\r\n * ```\r\n */\r\nconst isInRange = (date, minDate, maxDate) => {\r\n  if (date && minDate && maxDate) {\r\n    return minDate <= date && date <= maxDate;\r\n  }\r\n  return true;\r\n};\r\nconst lookAhead = (iFormat, format, match, length = 2) => {\r\n  const increment = length - 1;\r\n  const followingCharacterMatches = format.charAt(iFormat + increment) === match;\r\n  const hasProperLength = iFormat + increment < format.length;\r\n  return hasProperLength && followingCharacterMatches;\r\n};\r\nconst formatNumber = (value, len) => {\r\n  let num = String(value);\r\n  while (num.length < len) {\r\n    num = '0' + num;\r\n  }\r\n  return num;\r\n};\r\nconst formatDate = (date, format, locale) => {\r\n  if (!date) {\r\n    return '';\r\n  }\r\n  let output = '';\r\n  for (let iFormat = 0; iFormat < format.length; iFormat++) {\r\n    switch (format.charAt(iFormat)) {\r\n      case 'd':\r\n        if (lookAhead(iFormat, format, 'd')) {\r\n          output += formatNumber(date.getDate(), 2);\r\n          iFormat++;\r\n        }\r\n        else {\r\n          output += String(date.getDate());\r\n        }\r\n        break;\r\n      case 'D':\r\n        const weekdayIndex = date.getDay();\r\n        if (lookAhead(iFormat, format, 'D')) {\r\n          iFormat++;\r\n          output += i18nDate[locale].weekdays[weekdayIndex];\r\n        }\r\n        else {\r\n          output += i18nDate[locale].weekdaysShort[weekdayIndex];\r\n        }\r\n        break;\r\n      case 'm':\r\n        if (lookAhead(iFormat, format, 'm')) {\r\n          output += formatNumber(date.getMonth() + 1, 2);\r\n          iFormat++;\r\n        }\r\n        else {\r\n          output += String(date.getMonth() + 1);\r\n        }\r\n        break;\r\n      case 'M':\r\n        const monthIndex = date.getMonth();\r\n        if (lookAhead(iFormat, format, 'M')) {\r\n          iFormat++;\r\n          output += i18nDate[locale].months[monthIndex];\r\n        }\r\n        else {\r\n          output += i18nDate[locale].monthsShort[monthIndex];\r\n        }\r\n        break;\r\n      case 'y':\r\n        if (lookAhead(iFormat, format, 'y', 4)) {\r\n          iFormat += 3;\r\n          output += date.getFullYear();\r\n        }\r\n        else {\r\n          output += (date.getFullYear() % 100 < 10 ? '0' : '') + (date.getFullYear() % 100);\r\n          iFormat++;\r\n        }\r\n        break;\r\n      default:\r\n        output += format.charAt(iFormat);\r\n    }\r\n  }\r\n  return output;\r\n};\r\nconst FORMATTING_TOKENS = /(\\[[^\\[]*\\])|(mm|dd|yyyy|yy|.)/g;\r\nconst TWO_NUMERICS_REGEX = /\\d\\d/; // 00 - 99\r\nconst FOUR_NUMERICS_REGEX = /\\d{4}/; // 0000 - 9999\r\nconst NON_NUMERIC_REGEX = /[^0-9]/g;\r\nconst YEAR = 'year';\r\nconst MONTH = 'month';\r\nconst DAY = 'day';\r\nconst parseFlags = {};\r\nconst addParseFlag = (token, regex, callback) => {\r\n  const tokens = Array.isArray(token) ? token : [token];\r\n  let func;\r\n  if (typeof callback === 'string') {\r\n    func = (input) => {\r\n      const value = parseInt(input, 10);\r\n      return { [callback]: value };\r\n    };\r\n  }\r\n  else {\r\n    func = callback;\r\n  }\r\n  tokens.forEach((key) => {\r\n    parseFlags[key] = [regex, func];\r\n  });\r\n};\r\naddParseFlag('yy', TWO_NUMERICS_REGEX, (input) => {\r\n  const year = new Date().getFullYear();\r\n  const cent = Math.floor(year / 100);\r\n  let value = parseInt(input, 10);\r\n  value = (value > 68 ? cent - 1 : cent) * 100 + value;\r\n  return { [YEAR]: value };\r\n});\r\naddParseFlag('yyyy', FOUR_NUMERICS_REGEX, YEAR);\r\naddParseFlag('mm', TWO_NUMERICS_REGEX, (input) => ({ [MONTH]: parseInt(input, 10) - 1 }));\r\naddParseFlag('dd', TWO_NUMERICS_REGEX, DAY);\r\nconst getFullInputArray = (input, backupDate = new Date()) => {\r\n  const result = [0, 0, 1];\r\n  const backupArr = [backupDate.getFullYear(), backupDate.getMonth(), backupDate.getDate()];\r\n  let useBackup = true;\r\n  for (let i = 0; i < 7; i++) {\r\n    if (input[i] === undefined) {\r\n      result[i] = useBackup ? backupArr[i] : result[i];\r\n    }\r\n    else {\r\n      result[i] = input[i];\r\n      useBackup = false;\r\n    }\r\n  }\r\n  return result;\r\n};\r\nconst createDate = (year, month, day) => {\r\n  if (!(year < 100 && year >= 0)) {\r\n    return new Date(year, month, day);\r\n  }\r\n  const date = new Date(year + 400, month, day);\r\n  if (isFinite(date.getFullYear())) {\r\n    date.setFullYear(year);\r\n  }\r\n  return date;\r\n};\r\nconst makeParser = (dateString, format) => {\r\n  const tokens = format.match(FORMATTING_TOKENS);\r\n  if (!tokens) {\r\n    throw new Error();\r\n  }\r\n  const { length } = tokens;\r\n  let mark = {};\r\n  for (let i = 0; i < length; i += 1) {\r\n    const token = tokens[i];\r\n    const parseTo = parseFlags[token];\r\n    if (!parseTo) {\r\n      const word = token.replace(/^\\[|\\]$/g, '');\r\n      if (dateString.indexOf(word) === 0) {\r\n        dateString = dateString.substr(word.length);\r\n      }\r\n      else {\r\n        throw new Error('not match');\r\n      }\r\n    }\r\n    else {\r\n      const regex = parseTo[0];\r\n      const parser = parseTo[1];\r\n      const value = (regex.exec(dateString) || [])[0];\r\n      const obj = parser(value);\r\n      mark = Object.assign(Object.assign({}, mark), obj);\r\n      dateString = dateString.replace(value, '');\r\n    }\r\n  }\r\n  return mark;\r\n};\r\nconst getCleanDateString = (dirtyDateString, format) => {\r\n  if (dirtyDateString.length === format.length) {\r\n    return dirtyDateString;\r\n  }\r\n  const separator = dirtyDateString.match(NON_NUMERIC_REGEX)[0];\r\n  // pad signle digits to follow supported dateformats\r\n  return dirtyDateString\r\n    .split(separator)\r\n    .map((s) => (s.length === 1 ? '0' + s : s))\r\n    .join(separator);\r\n};\r\nconst getDateParts = (dirtyDateString, format) => {\r\n  const dateString = getCleanDateString(dirtyDateString, format);\r\n  return makeParser(dateString, format);\r\n};\r\nconst toDate = (dirtyDateString, format) => {\r\n  try {\r\n    const { backupDate = new Date() } = {};\r\n    const { year, month, day, date } = getDateParts(dirtyDateString, format);\r\n    if (date) {\r\n      return date;\r\n    }\r\n    const inputArray = [year, month, day];\r\n    let parsedDate;\r\n    const result = getFullInputArray(inputArray, backupDate);\r\n    parsedDate = createDate(...result);\r\n    return parsedDate;\r\n  }\r\n  catch (e) {\r\n    return new Date(NaN);\r\n  }\r\n};\r\nconst createCalendarGrid = (calendarGridArguments) => {\r\n  const { firstDateOfBox, allowedDates, dateFormat, locale, selectedDate, minDate, maxDate, pointerDate } = calendarGridArguments;\r\n  const weekDatePointer = new Date(firstDateOfBox);\r\n  const dayDatePointer = new Date(firstDateOfBox);\r\n  let calendar = [];\r\n  do {\r\n    let row = [];\r\n    do {\r\n      row = [\r\n        ...row,\r\n        {\r\n          date: new Date(dayDatePointer),\r\n          display: formatDate(dayDatePointer, dateFormat, locale),\r\n          dateString: formatDate(dayDatePointer, dateFormat, locale),\r\n          label: day(dayDatePointer).toString(),\r\n          isToday: isSameDay(dayDatePointer, now()),\r\n          isSelected: selectedDate && isSameDay(dayDatePointer, selectedDate),\r\n          isDisabled: !allowedDates(dayDatePointer) || !isInRange(dayDatePointer, minDate, maxDate),\r\n          isOutdated: pointerDate.month !== dayDatePointer.getMonth() || !isInRange(dayDatePointer, minDate, maxDate),\r\n        },\r\n      ];\r\n      dayDatePointer.setDate(dayDatePointer.getDate() + 1);\r\n    } while (isSameWeek(dayDatePointer, weekDatePointer));\r\n    calendar = [...calendar, row];\r\n    weekDatePointer.setDate(weekDatePointer.getDate() + 7);\r\n  } while (isSameMonth(new Date(pointerDate.year, pointerDate.month, pointerDate.day), dayDatePointer));\r\n  return calendar;\r\n};\n\nvar SixDateFormats;\r\n(function (SixDateFormats) {\r\n  SixDateFormats[\"DDMMYYY_DOT\"] = \"dd.mm.yyyy\";\r\n  SixDateFormats[\"YYYYMMDD_DASH\"] = \"yyyy-mm-dd\";\r\n  SixDateFormats[\"DDMMYYYY_DASH\"] = \"dd-mm-yyyy\";\r\n  SixDateFormats[\"DDMMYYYY_SLASH\"] = \"dd/mm/yyyy\";\r\n  SixDateFormats[\"YYYYMMDD_SLASH\"] = \"yyyy/mm/dd\";\r\n  SixDateFormats[\"DDMMYY_DOT\"] = \"dd.mm.yy\";\r\n  SixDateFormats[\"YYMMDD_DASH\"] = \"yy-mm-dd\";\r\n  SixDateFormats[\"DDMMYY_DASH\"] = \"dd-mm-yy\";\r\n  SixDateFormats[\"DDMMYY_SLASH\"] = \"dd/mm/yy\";\r\n  SixDateFormats[\"YYMMDD_SLASH\"] = \"yy/mm/dd\";\r\n})(SixDateFormats || (SixDateFormats = {}));\n\nconst MonthSelection = ({ locale, selectedDate, onClickMonthCell }) => {\r\n  const isToday = (value) => locale.monthsShort[now().getMonth()] === value;\r\n  const isSelectedMonth = (value) => (selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.getMonth()) === locale.monthsShort.findIndex((m) => m === value);\r\n  return (h(\"table\", { class: \"datepicker-table\", part: \"month-selection\" },\r\n    h(\"tbody\", null, locale.monthsShortGrouped.map((row) => (h(\"tr\", { class: \"datepicker-table__row\" }, row.map((month) => (h(\"td\", { onClick: () => onClickMonthCell(month), class: {\r\n        'datepicker-table__cell': true,\r\n        'datepicker-table__cell--is-today': isToday(month),\r\n        'datepicker-table__cell--is-selected': isSelectedMonth(month),\r\n      } }, month)))))))));\r\n};\n\nconst DaySelection = ({ locale, calendarGrid, onClickDateCell }) => {\r\n  return (h(\"table\", { class: \"datepicker-table\", part: \"day-selection\" },\r\n    h(\"thead\", { part: \"weekday-header\" }, locale.weekdaysMin.map((weekday) => (h(\"th\", { class: \"datepicker__cell\" }, weekday)))),\r\n    h(\"tbody\", null, calendarGrid.map((row) => (h(\"tr\", { class: \"datepicker-table__row\" }, row.map((cell) => (h(\"td\", { \"data-date\": cell.dateString, onClick: () => onClickDateCell(cell), class: {\r\n        'datepicker-table__cell': true,\r\n        'datepicker-table__cell--is-today': cell.isToday,\r\n        'datepicker-table__cell--is-selected': cell.isSelected,\r\n        'datepicker-table__cell--is-outdated': cell.isOutdated,\r\n        'datepicker-table__cell--is-disabled': cell.isDisabled,\r\n        'datepicker-table__cell--is-selectable': !cell.isDisabled,\r\n      } }, cell.label)))))))));\r\n};\n\nconst YearSelection = ({ selectedDate, yearSelection, onClickYearCell }) => {\r\n  return (h(\"table\", { class: \"datepicker-table\", part: \"year-selection\" },\r\n    h(\"tbody\", null, yearSelection.map((row) => (h(\"tr\", { class: \"datepicker-table__row\" }, row.map((year) => (h(\"td\", { onClick: () => onClickYearCell(year), class: {\r\n        'datepicker-table__cell': true,\r\n        'datepicker-table__cell--is-today': now().getFullYear() === year,\r\n        'datepicker-table__cell--is-selected': (selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.getFullYear()) === year,\r\n      } }, year)))))))));\r\n};\n\nconst sixDatepickerCss = \":host{position:relative;box-sizing:border-box}:host *,:host *:before,:host *:after{box-sizing:inherit}:host{display:block;font-family:var(--six-font-family)}.datepicker__container{position:relative}.datepicker__popup{min-width:400px;background-color:white;padding:0.5em 0.5em 1.5em;box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);user-select:none;position:absolute;z-index:var(--six-z-index-dropdown);right:0;left:0}.datepicker__popup--is-up{bottom:100%;min-height:382px}.datepicker__popup--is-inline{position:initial;box-shadow:none;border:1px solid var(--six-color-web-rock-400)}.datepicker-header{display:flex;justify-content:space-between;border-bottom:1px solid var(--six-color-web-rock-400);padding:0.5em;margin-bottom:1em}.datepicker-header svg{fill:var(--six-color-web-rock-900);stroke:none}.datepicker-header__btn{cursor:pointer;width:2.5em;height:2.5em;display:flex;vertical-align:middle;align-items:center;justify-content:center}.datepicker-header__btn:hover{background-color:var(--six-color-web-rock-100);border-radius:100%}.datepicker-header__label{display:flex}.datepicker-header__label>div{cursor:pointer;padding:0.5em;display:flex;vertical-align:middle;align-items:center;justify-content:center}.datepicker-header__label>div:hover{background-color:var(--six-color-web-rock-100)}.datepicker-table{width:100%}.datepicker-table__cell{text-align:center;width:2.5rem;height:2.5rem;cursor:pointer}.datepicker-table__cell:hover{background-color:var(--six-table-row-background-color-hover)}.datepicker-table__cell--is-today{border:1px solid var(--six-color-web-rock-400)}.datepicker-table__cell--is-selected{background-color:var(--six-color-red);color:var(--six-color-white)}.datepicker-table__cell--is-disabled{background-color:var(--six-color-web-rock-200);cursor:initial}.datepicker-table__cell--is-disabled:hover{background-color:var(--six-color-web-rock-200)}.datepicker-table__cell--is-outdated{color:var(--six-color-web-rock-400)}.datepicker-clear{display:inline-flex;align-items:center;font-size:inherit;color:var(--six-input-icon-color);border:none;background:none;padding:0;transition:var(--six-transition-fast) color;cursor:pointer}.datepicker-clear:hover{color:var(--six-input-icon-color-hover)}.datepicker-clear:focus{outline:none}.datepicker-clear--right{right:0;position:absolute}.datepicker-clear--left{right:35px;position:absolute}.input--empty .datepicker-clear{visibility:hidden}.prefix{cursor:pointer}.prefix--right{right:0;display:inline-flex;position:absolute;font-size:inherit;color:var(--six-input-icon-color);border:none;background:none;margin-right:var(--six-input-spacing-medium);transition:var(--six-transition-fast) color}\";\n\nconst NUMBER_OF_YEARS_SHOWN = 25;\r\nconst MIN_POPUP_HEIGHT = 400;\r\nvar SelectionMode;\r\n(function (SelectionMode) {\r\n  SelectionMode[\"DAY\"] = \"day\";\r\n  SelectionMode[\"MONTH\"] = \"month\";\r\n  SelectionMode[\"YEAR\"] = \"year\";\r\n})(SelectionMode || (SelectionMode = {}));\r\nconst getYearSelectionAroundYear = (year) => {\r\n  const numberOfElementsPerRow = 5;\r\n  return Array.from(new Array(NUMBER_OF_YEARS_SHOWN).keys())\r\n    .map((n) => n + year - Math.floor(NUMBER_OF_YEARS_SHOWN / 2))\r\n    .reduce((curr, item, index) => {\r\n    if (index % numberOfElementsPerRow === 0) {\r\n      curr.push([]);\r\n    }\r\n    curr[curr.length - 1].push(item);\r\n    return curr;\r\n  }, []);\r\n};\r\nlet SixDatepicker = class {\r\n  constructor(hostRef) {\r\n    registerInstance(this, hostRef);\r\n    this.sixSelect = createEvent(this, \"six-datepicker-select\", 7);\r\n    this.sixClear = createEvent(this, \"six-datepicker-clear\", 7);\r\n    this.sixBlur = createEvent(this, \"six-datepicker-blur\", 7);\r\n    this.eventListeners = new EventListeners();\r\n    this.selectedDate = null;\r\n    this.pointerDate = SixDatepicker.getCurrentDateAsPointer();\r\n    this.selectionMode = SelectionMode.DAY;\r\n    this.isDropDownContentUp = false;\r\n    /**\r\n     * The language used to render the weekdays and months.\r\n     */\r\n    this.locale = 'en';\r\n    /** Indicates whether or not the calendar dropdown is open on startup. You can use this in lieu of the show/hide methods. */\r\n    this.open = false;\r\n    /** Indicates whether or not the calendar should be shown as an inline (always open) component */\r\n    this.inline = false;\r\n    /**\r\n     * If `true` the user can only select a date via the component in the popup, but not directly edit the input field.\r\n     */\r\n    this.readonly = false;\r\n    /**\r\n     * If `true` the component is disabled.\r\n     */\r\n    this.disabled = false;\r\n    /**\r\n     * Callback to determine which date in the datepicker should be selectable.\r\n     * the callback function will get a datestring as an argument, e.g. '2021-07-04'\r\n     *\r\n     * Usage e.g.:\r\n     * const datepicker = document.getElementById('allowed-date-picker');\r\n     * datepicker.allowedDates = datestring => parseInt(datestring.split('-')[2], 10) % 2 === 0;\r\n     */\r\n    this.allowedDates = () => true;\r\n    /**\r\n     * The minimum datetime allowed. Value must be a date object\r\n     */\r\n    this.min = null;\r\n    /**\r\n     * The maximum datetime allowed. Value must be a date object\r\n     */\r\n    this.max = null;\r\n    /**\r\n     * Closes the datepicker dropdown after selection\r\n     */\r\n    this.closeOnSelect = true;\r\n    /** Datepicker size. */\r\n    this.size = 'medium';\r\n    /**\r\n     * The value of the form field, which accepts a date object.\r\n     */\r\n    this.value = null;\r\n    /** Define the dateFormat. Valid formats are:\r\n     * 'dd.mm.yyyy'\r\n     * 'yyyy-mm-dd'\r\n     * 'dd-mm-yyyy'\r\n     * 'dd/mm/yyyy'\r\n     * 'yyyy/mm/dd'\r\n     * 'dd.mm.yy'\r\n     * 'yy-mm-dd'\r\n     * 'dd-mm-yy'\r\n     * 'dd/mm/yy'\r\n     * 'yy/mm/dd'\r\n     * */\r\n    this.dateFormat = SixDateFormats.DDMMYYY_DOT;\r\n    /**\r\n     * Set the amount of time, in milliseconds, to wait to trigger the `dateChange` event after each keystroke.\r\n     */\r\n    this.debounce = DEFAULT_DEBOUNCE_FAST;\r\n    /** Set to display the error text on blur and not when typing */\r\n    this.errorOnBlur = false;\r\n    /** The input's error text. Alternatively, you can use the error-text slot. */\r\n    this.errorText = '';\r\n    /** The input's label. Alternatively, you can use the label slot. */\r\n    this.label = '';\r\n    /** The input's name attribute. */\r\n    this.name = '';\r\n    /** Set to true to add a clear button when the input is populated. */\r\n    this.clearable = false;\r\n    /** Set the position of the icon */\r\n    this.iconPosition = 'left';\r\n    /**\r\n     * Enable this option to prevent the panel from being clipped when the component is placed inside a container with\r\n     * `overflow: auto|scroll`.\r\n     */\r\n    this.hoist = false;\r\n    this.defaultValue = null;\r\n    this.handleDocumentKeyDown = (event) => {\r\n      // Close when escape is pressed\r\n      if (this.open && event.key === 'Escape') {\r\n        event.stopPropagation();\r\n        this.closePopup();\r\n        void this.inputElement.setFocus();\r\n      }\r\n      // Handle tabbing\r\n      if (event.key === 'Tab') {\r\n        this.closePopup();\r\n      }\r\n    };\r\n    this.handleDocumentMouseDown = (event) => {\r\n      // Close when clicking outside of the containing element\r\n      const path = event.composedPath();\r\n      if (!path.includes(this.container)) {\r\n        this.closePopup();\r\n        return;\r\n      }\r\n    };\r\n    this.onClickDateCell = (cell) => {\r\n      if (!cell.isDisabled) {\r\n        void this.select(cell.dateString);\r\n      }\r\n    };\r\n    this.onClickMonthCell = (selectedMonth) => {\r\n      const month = i18nDate[this.locale].monthsShort.findIndex((monthShort) => monthShort === selectedMonth);\r\n      this.pointerDate = Object.assign(Object.assign({}, this.pointerDate), { month });\r\n      this.selectionMode = SelectionMode.DAY;\r\n    };\r\n    this.onClickYearCell = (year) => {\r\n      this.pointerDate = Object.assign(Object.assign({}, this.pointerDate), { year });\r\n      this.selectionMode = SelectionMode.DAY;\r\n    };\r\n    this.handleInputChange = (event) => {\r\n      const inputValue = this.inputElement.value;\r\n      if (!isValidDateString(inputValue, this.dateFormat)) {\r\n        return;\r\n      }\r\n      const inputValueDate = toDate(inputValue, this.dateFormat);\r\n      if (inputValueDate === undefined) {\r\n        return;\r\n      }\r\n      if (this.min && this.min.getTime() > inputValueDate.getTime()) {\r\n        return;\r\n      }\r\n      if (this.max && this.max.getTime() < inputValueDate.getTime()) {\r\n        return;\r\n      }\r\n      this.updateIfChanged(inputValueDate);\r\n      event.stopPropagation();\r\n      const datesOnly = inputValue.replace(/[^\\d]/g, '');\r\n      let isDateValid = !inputValue;\r\n      if (inputValue && datesOnly.length >= 6) {\r\n        const date = toDate(inputValue, this.dateFormat);\r\n        const datestring = formatDate(date, this.dateFormat, this.locale);\r\n        if (isValidDateString(datestring, this.dateFormat)) {\r\n          this.selectedDate = toDate(datestring, this.dateFormat);\r\n          this.updatePointerDates();\r\n          this.updateValue(this.selectedDate);\r\n          isDateValid = true;\r\n        }\r\n      }\r\n      this.displayCustomMessage(isDateValid);\r\n    };\r\n    this.handleOnBlur = (event) => {\r\n      // clear the value if the user deleted the date\r\n      if (this.inputElement.value === '' && isValidDate(this.value)) {\r\n        this.value = undefined;\r\n      }\r\n      event.stopPropagation();\r\n      const inputValue = this.inputElement.value;\r\n      const inputValueDate = toDate(inputValue, this.dateFormat);\r\n      const formattedDate = formatDate(this.value, this.dateFormat, this.locale);\r\n      if (inputValueDate && inputValue !== formattedDate) {\r\n        // properly format date if necessary\r\n        this.inputElement.value = formattedDate;\r\n      }\r\n      this.sixBlur.emit(this.value);\r\n    };\r\n  }\r\n  debounceChanged() {\r\n    this.sixSelect = debounceEvent(this.sixSelect, this.debounce);\r\n  }\r\n  /**\r\n   * Update the native input element when the value changes\r\n   */\r\n  valueChanged() {\r\n    // map unreadable values to undefined to make the datepicker fault-tolerant\r\n    if (this.isValidValue()) {\r\n      console.warn('Encountered unreadable date, will map to undefined. Received value', this.value);\r\n      this.value = undefined;\r\n      return;\r\n    }\r\n    this.selectedDate = this.value;\r\n    this.updatePointerDates();\r\n    this.sixSelect.emit(this.value);\r\n  }\r\n  async resizeHandler() {\r\n    this.calcIsDropDownContentUp();\r\n    this.moveOpenHoistedPopup();\r\n  }\r\n  async scrollHandler() {\r\n    this.calcIsDropDownContentUp();\r\n    this.moveOpenHoistedPopup();\r\n  }\r\n  get container() {\r\n    return this.containingElement || this.host;\r\n  }\r\n  get firstDateOfBox() {\r\n    const date = new Date(this.pointerDate.year, this.pointerDate.month, 1);\r\n    return getFirstDayOfTheWeek(date);\r\n  }\r\n  /** Checks for validity and shows the browser's validation message if the control is invalid. */\r\n  async reportValidity() {\r\n    return this.inputElement.reportValidity();\r\n  }\r\n  /** Checks for validity. */\r\n  async checkValidity() {\r\n    return this.inputElement.checkValidity();\r\n  }\r\n  /** Sets a custom validation message. If `message` is not empty, the field will be considered invalid. */\r\n  async setCustomValidity(message) {\r\n    await this.inputElement.setCustomValidity(message);\r\n  }\r\n  /** Resets the formcontrol */\r\n  async reset() {\r\n    this.value = this.defaultValue;\r\n    this.inputElement.value = formatDate(this.defaultValue, this.dateFormat, this.locale);\r\n    await this.inputElement.reset();\r\n  }\r\n  isValidValue() {\r\n    if (this.value === undefined || this.value === null) {\r\n      return false;\r\n    }\r\n    if (!(this.value instanceof Date)) {\r\n      return true;\r\n    }\r\n    return this.value instanceof Date && isNaN(this.value);\r\n  }\r\n  get calendarGrid() {\r\n    return createCalendarGrid({\r\n      firstDateOfBox: this.firstDateOfBox,\r\n      allowedDates: this.allowedDates,\r\n      dateFormat: this.dateFormat,\r\n      locale: this.locale,\r\n      selectedDate: this.selectedDate,\r\n      minDate: this.min,\r\n      maxDate: this.max,\r\n      pointerDate: this.pointerDate,\r\n    });\r\n  }\r\n  calcIsDropDownContentUp() {\r\n    if (!this.inputElement || !this.wrapper) {\r\n      return;\r\n    }\r\n    const inputBoundingRect = this.inputElement.getBoundingClientRect();\r\n    const wrapperBoundingRect = this.wrapper.getBoundingClientRect();\r\n    const minPopupHeight = Math.max(wrapperBoundingRect.height, MIN_POPUP_HEIGHT);\r\n    const moreSpaceInTop = inputBoundingRect.y > window.innerHeight / 2;\r\n    this.isDropDownContentUp = moreSpaceInTop && window.innerHeight < inputBoundingRect.bottom + minPopupHeight;\r\n  }\r\n  getMonthStringForIndex(index) {\r\n    return i18nDate[this.locale].months[index];\r\n  }\r\n  previousUnit() {\r\n    if (this.selectionMode === SelectionMode.DAY) {\r\n      this.previousMonth();\r\n    }\r\n    else if (this.selectionMode === SelectionMode.MONTH) {\r\n      this.previousYear();\r\n    }\r\n    else if (this.selectionMode === SelectionMode.YEAR) {\r\n      this.previousYearGroup();\r\n    }\r\n  }\r\n  previousYear() {\r\n    this.pointerDate = Object.assign(Object.assign({}, this.pointerDate), { year: this.pointerDate.year - 1 });\r\n  }\r\n  previousYearGroup() {\r\n    this.pointerDate = Object.assign(Object.assign({}, this.pointerDate), { year: this.pointerDate.year - NUMBER_OF_YEARS_SHOWN });\r\n  }\r\n  previousMonth() {\r\n    if (this.pointerDate.month === 0) {\r\n      this.pointerDate = { year: this.pointerDate.year - 1, month: 11, day: 1 };\r\n    }\r\n    else {\r\n      this.pointerDate = { year: this.pointerDate.year, month: this.pointerDate.month - 1, day: 1 };\r\n    }\r\n  }\r\n  nextUnit() {\r\n    if (this.selectionMode === SelectionMode.DAY) {\r\n      this.nextMonth();\r\n    }\r\n    else if (this.selectionMode === SelectionMode.MONTH) {\r\n      this.nextYear();\r\n    }\r\n    else if (this.selectionMode === SelectionMode.YEAR) {\r\n      this.nextYearGroup();\r\n    }\r\n  }\r\n  nextMonth() {\r\n    if (this.pointerDate.month === 11) {\r\n      this.pointerDate = { year: this.pointerDate.year + 1, month: 0, day: 1 };\r\n    }\r\n    else {\r\n      this.pointerDate = { year: this.pointerDate.year, month: this.pointerDate.month + 1, day: 1 };\r\n    }\r\n  }\r\n  nextYear() {\r\n    this.pointerDate = Object.assign(Object.assign({}, this.pointerDate), { year: this.pointerDate.year + 1 });\r\n  }\r\n  nextYearGroup() {\r\n    this.pointerDate = Object.assign(Object.assign({}, this.pointerDate), { year: this.pointerDate.year + NUMBER_OF_YEARS_SHOWN });\r\n  }\r\n  openCalendar() {\r\n    if (!this.open && !this.disabled) {\r\n      this.open = true;\r\n      this.setupEventListenersForOpenPopup();\r\n    }\r\n  }\r\n  setupEventListenersForOpenPopup() {\r\n    this.eventListeners.add(document, 'keydown', this.handleDocumentKeyDown);\r\n    this.eventListeners.add(document, 'mousedown', this.handleDocumentMouseDown);\r\n  }\r\n  handleClearClick(event) {\r\n    event.stopPropagation();\r\n    void this.select(undefined);\r\n    this.sixClear.emit();\r\n  }\r\n  closePopup() {\r\n    if (this.inline) {\r\n      return;\r\n    }\r\n    this.open = false;\r\n    this.eventListeners.remove(document, 'keydown', this.handleDocumentKeyDown);\r\n    this.eventListeners.remove(document, 'mousedown', this.handleDocumentMouseDown);\r\n    this.selectionMode = SelectionMode.DAY;\r\n  }\r\n  updatePointerDates() {\r\n    const date = this.getPointerDate();\r\n    if (this.differsFromPointerDate(date)) {\r\n      this.pointerDate = {\r\n        year: year(date),\r\n        month: month(date),\r\n        day: day(date),\r\n      };\r\n    }\r\n  }\r\n  differsFromPointerDate(date) {\r\n    return (this.pointerDate.day !== day(date) ||\r\n      this.pointerDate.month !== month(date) ||\r\n      this.pointerDate.year !== year(date));\r\n  }\r\n  getPointerDate() {\r\n    if (this.selectedDate !== undefined && this.selectedDate !== null) {\r\n      return this.selectedDate;\r\n    }\r\n    if (isNil(this.defaultDate)) {\r\n      return now();\r\n    }\r\n    else {\r\n      return this.defaultDate && toDate(this.defaultDate, this.dateFormat);\r\n    }\r\n  }\r\n  updateValue(newDate) {\r\n    this.displayCustomMessage(true);\r\n    this.updateIfChanged(newDate);\r\n  }\r\n  updateIfChanged(newDate) {\r\n    if (isSameDay(this.value, newDate)) {\r\n      return;\r\n    }\r\n    this.value = newDate;\r\n  }\r\n  /**\r\n   * Selects an option\r\n   */\r\n  async select(datestring) {\r\n    if (!datestring) {\r\n      this.updateValue(undefined);\r\n    }\r\n    else {\r\n      this.updateValue(toDate(datestring, this.dateFormat));\r\n    }\r\n    this.updatePointerDates();\r\n    if (this.closeOnSelect) {\r\n      this.closePopup();\r\n    }\r\n  }\r\n  componentWillLoad() {\r\n    this.validateProps();\r\n    this.defaultValue = this.value;\r\n    this.selectedDate = this.value;\r\n    this.updatePointerDates();\r\n    this.updateValue(this.value);\r\n    if (this.inline) {\r\n      this.open = true;\r\n    }\r\n    if (this.open) {\r\n      this.setupEventListenersForOpenPopup();\r\n    }\r\n  }\r\n  validateProps() {\r\n    if (this.value !== null && this.value !== undefined && !(this.value instanceof Date)) {\r\n      throw new Error('Datepicker no longer supports strings as value. Use a date object instead!');\r\n    }\r\n    if (this.min !== null && this.min !== undefined && !(this.min instanceof Date)) {\r\n      throw new Error('Datepicker no longer supports strings as min. Use a date object instead!');\r\n    }\r\n    if (this.max !== null && this.max !== undefined && !(this.max instanceof Date)) {\r\n      throw new Error('Datepicker no longer supports strings as min. Use a date object instead!');\r\n    }\r\n  }\r\n  componentDidLoad() {\r\n    this.eventListeners.add(this.inputElement, 'six-input-input', debounce(this.handleInputChange, this.debounce));\r\n    this.eventListeners.add(this.inputElement, 'six-input-blur', this.handleOnBlur);\r\n  }\r\n  renderHeader() {\r\n    return (h(\"header\", { class: \"datepicker-header\", part: \"header\" }, h(\"div\", { class: \"datepicker-header__btn prev\", onClick: () => this.previousUnit() }, h(\"svg\", { viewBox: \"0 5 13 13\", width: \"14\", height: \"23\" }, h(\"path\", { d: \"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\" }))), h(\"div\", { class: \"datepicker-header__label\" }, this.selectionMode === SelectionMode.DAY && (h(\"div\", { onClick: () => (this.selectionMode = SelectionMode.MONTH) }, h(\"span\", { class: \"datepicker-header__label-month\" }, this.getMonthStringForIndex(this.pointerDate.month)), h(\"span\", null, h(\"svg\", { viewBox: \"-3 -4 24 24\", width: \"20\", height: \"20\" }, h(\"polyline\", { points: \"6 9 12 15 18 9\" }))))), this.selectionMode !== SelectionMode.YEAR && (h(\"div\", { onClick: () => (this.selectionMode = SelectionMode.YEAR) }, h(\"span\", { class: \"datepicker-header__label-year\" }, this.pointerDate.year), h(\"span\", null, h(\"svg\", { viewBox: \"-3 -4 24 24\", width: \"20\", height: \"20\" }, h(\"polyline\", { points: \"6 9 12 15 18 9\" }))))), this.selectionMode === SelectionMode.YEAR && (h(\"div\", null, this.pointerDate.year - Math.floor(NUMBER_OF_YEARS_SHOWN / 2), \" \\u2013\", ' ', this.pointerDate.year + Math.floor(NUMBER_OF_YEARS_SHOWN / 2)))), h(\"div\", { class: \"datepicker-header__btn next\", onClick: () => this.nextUnit() }, h(\"svg\", { viewBox: \"5 5 13 13\", width: \"14\", height: \"23\" }, h(\"path\", { d: \"M5.88 4.12L13.76 12l-7.88 7.88L8 22l10-10L8 2z\" })))));\r\n  }\r\n  renderBody() {\r\n    switch (this.selectionMode) {\r\n      case SelectionMode.DAY:\r\n        return (h(DaySelection, { locale: i18nDate[this.locale], calendarGrid: this.calendarGrid, onClickDateCell: this.onClickDateCell }));\r\n      case SelectionMode.MONTH:\r\n        return (h(MonthSelection, { locale: i18nDate[this.locale], selectedDate: this.selectedDate, onClickMonthCell: this.onClickMonthCell }));\r\n      case SelectionMode.YEAR:\r\n        return (h(YearSelection, { selectedDate: this.selectedDate, yearSelection: getYearSelectionAroundYear(this.pointerDate.year), onClickYearCell: this.onClickYearCell }));\r\n    }\r\n  }\r\n  renderCustomIcon() {\r\n    const icon = hasSlot(this.host, 'custom-icon') ? (h(\"slot\", { name: \"custom-icon\" })) : (h(\"six-icon\", { size: this.size === 'large' ? 'medium' : this.size }, \"today\"));\r\n    return (h(\"span\", { slot: \"prefix\", part: \"icon\", class: {\r\n        prefix: true,\r\n        'prefix--right': this.iconPosition === 'right',\r\n      } }, icon));\r\n  }\r\n  renderClearable() {\r\n    return (this.clearable && (h(\"button\", { slot: \"suffix\", class: {\r\n        'datepicker-clear': true,\r\n        'datepicker-clear--right': this.iconPosition === 'left',\r\n        'datepicker-clear--left': this.iconPosition === 'right',\r\n      }, type: \"button\", onClick: this.handleClearClick, tabindex: \"-1\" }, h(\"six-icon\", { size: \"small\" }, \"clear\"))));\r\n  }\r\n  render() {\r\n    this.adjustPopupForHoisting();\r\n    return (h(\"div\", { ref: (el) => (this.wrapper = el), class: \"datepicker__container\" }, h(\"six-input\", { part: \"base\", value: formatDate(this.value, this.dateFormat, this.locale), ref: (el) => (this.inputElement = el), placeholder: this.placeholder, readonly: this.readonly, disabled: this.disabled, name: this.name, label: this.label, required: this.required, \"error-text\": this.errorText, \"error-on-blur\": this.errorOnBlur, onClick: () => this.openCalendar(), size: this.size, class: { 'input--empty': !this.value } }, this.renderCustomIcon(), this.renderClearable(), hasSlot(this.host, 'error-text') ? (h(\"span\", { slot: \"error-text\" }, h(\"slot\", { name: \"error-text\" }))) : null, hasSlot(this.host, 'label') ? (h(\"span\", { slot: \"label\" }, h(\"slot\", { name: \"label\" }))) : null), this.open && (h(\"div\", { part: \"popup\", ref: (el) => (this.popup = el), class: {\r\n        datepicker__popup: true,\r\n        'datepicker__popup--is-up': this.placement ? this.placement === 'top' : this.isDropDownContentUp,\r\n        'datepicker__popup--is-inline': this.inline,\r\n      } }, this.renderHeader(), this.renderBody(), h(\"div\", { class: \"datepicker__footer\" }, h(\"slot\", null))))));\r\n  }\r\n  /*\r\n   * The position of the hoisted datepicker needs to be correctly calculated since the position changes to fixed.\r\n   * Thus if the user scrolls or adjusts the screen size we need to recalculate the datepicker position.\r\n   */\r\n  moveOpenHoistedPopup() {\r\n    if (!this.hoist || !this.open) {\r\n      return;\r\n    }\r\n    const popupBoundingClientRect = this.popup.getBoundingClientRect();\r\n    const popupHeight = popupBoundingClientRect.height;\r\n    const inputBoundingClientRect = this.inputElement.getBoundingClientRect();\r\n    const inputTop = inputBoundingClientRect.top;\r\n    const inputHeight = inputBoundingClientRect.height;\r\n    this.calcIsDropDownContentUp();\r\n    if (this.isDropDownContentUp) {\r\n      this.popup.style.top = `${inputTop - popupHeight}px`;\r\n    }\r\n    else {\r\n      this.popup.style.top = `${inputTop + inputHeight}px`;\r\n    }\r\n  }\r\n  /*\r\n   * If the popup is hoisted we popup is hoisted its position will change to fix to not be clipped of by a containing container.\r\n   * To render the popup correctly we render it normally, and then assign this screenposition to the fixed popup\r\n   */\r\n  adjustPopupForHoisting() {\r\n    if (!this.hoist) {\r\n      return;\r\n    }\r\n    // execute after dropdown has been rendered to make sure the popup reference is correctly set\r\n    setTimeout(() => {\r\n      if (!this.popup) {\r\n        return;\r\n      }\r\n      // take a snapshot of normally rendered popup\r\n      const popupBoundingClientRect = this.popup.getBoundingClientRect();\r\n      // apply screen position to fixed popup\r\n      this.popup.style.position = 'fixed';\r\n      ['top', 'left', 'width', 'height'].forEach((property) => {\r\n        this.popup.style[property] = `${popupBoundingClientRect[property]}px`;\r\n      });\r\n      const inputBoundingClientRect = this.inputElement.getBoundingClientRect();\r\n      const inputTop = inputBoundingClientRect.top;\r\n      const popupTop = popupBoundingClientRect.top;\r\n      this.calcIsDropDownContentUp();\r\n      // check screen position to check whether the popup should be moved above or below the trigger element\r\n      if (this.isDropDownContentUp && inputTop < popupTop) {\r\n        //  move popup above input field if datepicker is at bottom of screen\r\n        this.popup.style.top = `${popupTop - popupBoundingClientRect.height - inputBoundingClientRect.height}px`;\r\n      }\r\n    }, 0);\r\n  }\r\n  connectedCallback() {\r\n    this.handleClearClick = this.handleClearClick.bind(this);\r\n  }\r\n  disconnectedCallback() {\r\n    this.eventListeners.removeAll();\r\n  }\r\n  displayCustomMessage(valid) {\r\n    if (!this.inputElement) {\r\n      return;\r\n    }\r\n    if (valid) {\r\n      void this.setCustomValidity('');\r\n    }\r\n    else {\r\n      const message = this.errorText ? this.errorText : 'Invalid date format';\r\n      void this.setCustomValidity(message);\r\n    }\r\n  }\r\n  static getCurrentDateAsPointer() {\r\n    return {\r\n      year: year(now()),\r\n      month: month(now()),\r\n      day: day(now()),\r\n    };\r\n  }\r\n  get host() { return getElement(this); }\r\n  static get watchers() { return {\r\n    \"debounce\": [\"debounceChanged\"],\r\n    \"value\": [\"valueChanged\"]\r\n  }; }\r\n};\r\nSixDatepicker.style = sixDatepickerCss;\n\nexport { SixDatepicker as six_datepicker };\n"],"sourceRoot":""}